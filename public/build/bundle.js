var app=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function l(){return Object.create(null)}function a(e){e.forEach(n)}function s(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let i;function c(e,t){return i||(i=document.createElement("a")),i.href=t,e===i.href}function u(t,n,l){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const l=t.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}(n,l))}function d(e){return null==e?"":e}function m(e,t,n){return e.set(n),t}const f="undefined"!=typeof window;let p=f?()=>window.performance.now():()=>Date.now(),h=f?e=>requestAnimationFrame(e):e;const v=new Set;function g(e){v.forEach((t=>{t.c(e)||(v.delete(t),t.f())})),0!==v.size&&h(g)}function y(e){let t;return 0===v.size&&h(g),{promise:new Promise((n=>{v.add(t={c:e,f:n})})),abort(){v.delete(t)}}}function b(e,t){e.appendChild(t)}function _(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function x(e){const t=j("style");return function(e,t){b(e.head||e,t),t.sheet}(_(e),t),t.sheet}function w(e,t,n){e.insertBefore(t,n||null)}function k(e){e.parentNode&&e.parentNode.removeChild(e)}function $(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function j(e){return document.createElement(e)}function q(e){return document.createTextNode(e)}function M(){return q(" ")}function E(){return q("")}function O(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function S(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function C(e,t){t=""+t,e.data!==t&&(e.data=t)}function z(e,t,n,l){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,l?"important":"")}function H(e,t){return new e(t)}const A=new Map;let I,T=0;function B(e,t,n,l,a,s,o,r=0){const i=16.666/l;let c="{\n";for(let e=0;e<=1;e+=i){const l=t+(n-t)*s(e);c+=100*e+`%{${o(l,1-l)}}\n`}const u=c+`100% {${o(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${r}`,m=_(e),{stylesheet:f,rules:p}=A.get(m)||function(e,t){const n={stylesheet:x(t),rules:{}};return A.set(e,n),n}(m,e);p[d]||(p[d]=!0,f.insertRule(`@keyframes ${d} ${u}`,f.cssRules.length));const h=e.style.animation||"";return e.style.animation=`${h?`${h}, `:""}${d} ${l}ms linear ${a}ms 1 both`,T+=1,d}function F(e,t){const n=(e.style.animation||"").split(", "),l=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),a=n.length-l.length;a&&(e.style.animation=l.join(", "),T-=a,T||h((()=>{T||(A.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&k(t)})),A.clear())})))}function L(e){I=e}function N(){if(!I)throw new Error("Function called outside component initialization");return I}function R(e){N().$$.on_mount.push(e)}const D=[],P=[];let W=[];const G=[],K=Promise.resolve();let X=!1;function Z(e){W.push(e)}function J(e){G.push(e)}const U=new Set;let Y,Q=0;function V(){if(0!==Q)return;const e=I;do{try{for(;Q<D.length;){const e=D[Q];Q++,L(e),ee(e.$$)}}catch(e){throw D.length=0,Q=0,e}for(L(null),D.length=0,Q=0;P.length;)P.pop()();for(let e=0;e<W.length;e+=1){const t=W[e];U.has(t)||(U.add(t),t())}W.length=0}while(D.length);for(;G.length;)G.pop()();X=!1,U.clear(),L(e)}function ee(e){if(null!==e.fragment){e.update(),a(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Z)}}function te(){return Y||(Y=Promise.resolve(),Y.then((()=>{Y=null}))),Y}function ne(e,t,n){e.dispatchEvent(function(e,t,{bubbles:n=!1,cancelable:l=!1}={}){const a=document.createEvent("CustomEvent");return a.initCustomEvent(e,n,l,t),a}(`${t?"intro":"outro"}${n}`))}const le=new Set;let ae;function se(){ae={r:0,c:[],p:ae}}function oe(){ae.r||a(ae.c),ae=ae.p}function re(e,t){e&&e.i&&(le.delete(e),e.i(t))}function ie(e,t,n,l){if(e&&e.o){if(le.has(e))return;le.add(e),ae.c.push((()=>{le.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}else l&&l()}const ce={duration:0};function ue(n,l,a){const o={direction:"in"};let r,i,c=l(n,a,o),u=!1,d=0;function m(){r&&F(n,r)}function f(){const{delay:l=0,duration:a=300,easing:s=t,tick:o=e,css:f}=c||ce;f&&(r=B(n,0,1,a,l,s,f,d++)),o(0,1);const h=p()+l,v=h+a;i&&i.abort(),u=!0,Z((()=>ne(n,!0,"start"))),i=y((e=>{if(u){if(e>=v)return o(1,0),ne(n,!0,"end"),m(),u=!1;if(e>=h){const t=s((e-h)/a);o(t,1-t)}}return u}))}let h=!1;return{start(){h||(h=!0,F(n),s(c)?(c=c(o),te().then(f)):f())},invalidate(){h=!1},end(){u&&(m(),u=!1)}}}function de(n,l,o){const r={direction:"out"};let i,c=l(n,o,r),u=!0;const d=ae;function m(){const{delay:l=0,duration:s=300,easing:o=t,tick:r=e,css:m}=c||ce;m&&(i=B(n,1,0,s,l,o,m));const f=p()+l,h=f+s;Z((()=>ne(n,!1,"start"))),y((e=>{if(u){if(e>=h)return r(0,1),ne(n,!1,"end"),--d.r||a(d.c),!1;if(e>=f){const t=o((e-f)/s);r(1-t,t)}}return u}))}return d.r+=1,s(c)?te().then((()=>{c=c(r),m()})):m(),{end(e){e&&c.tick&&c.tick(1,0),u&&(i&&F(n,i),u=!1)}}}function me(e,t){e.d(1),t.delete(e.key)}function fe(e,t){ie(e,1,1,(()=>{t.delete(e.key)}))}function pe(e,t,n,l,s,o,r,i,c,u,d,m){let f=e.length,p=o.length,h=f;const v={};for(;h--;)v[e[h].key]=h;const g=[],y=new Map,b=new Map,_=[];for(h=p;h--;){const e=m(s,o,h),a=n(e);let i=r.get(a);i?l&&_.push((()=>i.p(e,t))):(i=u(a,e),i.c()),y.set(a,g[h]=i),a in v&&b.set(a,Math.abs(h-v[a]))}const x=new Set,w=new Set;function k(e){re(e,1),e.m(i,d),r.set(e.key,e),d=e.first,p--}for(;f&&p;){const t=g[p-1],n=e[f-1],l=t.key,a=n.key;t===n?(d=t.first,f--,p--):y.has(a)?!r.has(l)||x.has(l)?k(t):w.has(a)?f--:b.get(l)>b.get(a)?(w.add(l),k(t)):(x.add(a),f--):(c(n,r),f--)}for(;f--;){const t=e[f];y.has(t.key)||c(t,r)}for(;p;)k(g[p-1]);return a(_),g}function he(e,t,n){const l=e.$$.props[t];void 0!==l&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function ve(e){e&&e.c()}function ge(e,t,l,o){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,l),o||Z((()=>{const t=e.$$.on_mount.map(n).filter(s);e.$$.on_destroy?e.$$.on_destroy.push(...t):a(t),e.$$.on_mount=[]})),i.forEach(Z)}function ye(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];W.forEach((l=>-1===e.indexOf(l)?t.push(l):n.push(l))),n.forEach((e=>e())),W=t}(n.after_update),a(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function be(e,t){-1===e.$$.dirty[0]&&(D.push(e),X||(X=!0,K.then(V)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function _e(t,n,s,o,r,i,c,u=[-1]){const d=I;L(t);const m=t.$$={fragment:null,ctx:[],props:i,update:e,not_equal:r,bound:l(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:l(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(m.root);let f=!1;if(m.ctx=s?s(t,n.props||{},((e,n,...l)=>{const a=l.length?l[0]:n;return m.ctx&&r(m.ctx[e],m.ctx[e]=a)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](a),f&&be(t,e)),n})):[],m.update(),f=!0,a(m.before_update),m.fragment=!!o&&o(m.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);m.fragment&&m.fragment.l(e),e.forEach(k)}else m.fragment&&m.fragment.c();n.intro&&re(t.$$.fragment),ge(t,n.target,n.anchor,n.customElement),V()}L(d)}class xe{$destroy(){ye(this,1),this.$destroy=e}$on(t,n){if(!s(n))return e;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const e=l.indexOf(n);-1!==e&&l.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function we(e){const t=e-1;return t*t*t+1}function ke(e,{delay:n=0,duration:l=400,easing:a=t}={}){const s=+getComputedStyle(e).opacity;return{delay:n,duration:l,easing:a,css:e=>"opacity: "+e*s}}function $e(e,{delay:t=0,duration:n=400,easing:l=we,start:a=0,opacity:s=0}={}){const o=getComputedStyle(e),r=+o.opacity,i="none"===o.transform?"":o.transform,c=1-a,u=r*(1-s);return{delay:t,duration:n,easing:l,css:(e,t)=>`\n\t\t\ttransform: ${i} scale(${1-c*t});\n\t\t\topacity: ${r-u*t}\n\t\t`}}const je=[];function qe(t,n=e){let l;const a=new Set;function s(e){if(o(t,e)&&(t=e,l)){const e=!je.length;for(const e of a)e[1](),je.push(e,t);if(e){for(let e=0;e<je.length;e+=2)je[e][0](je[e+1]);je.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(o,r=e){const i=[o,r];return a.add(i),1===a.size&&(l=n(s)||e),o(t),()=>{a.delete(i),0===a.size&&l&&(l(),l=null)}}}}const Me=qe("Afflatus"),Ee=qe({}),Oe=qe({}),Se=qe({collection:{seal_needle:10,mimosa:15,conch_shell:15,vampires_old_tooth:10,large_roll_of_bandages:10,bird_wine:10,compass_cat:10,patchoulis_ribbon:10,sundial:10,blood_book:3,fluorescent_zanthoxylum:10,normal_stone:10,blade_of_yellow_spring:2},equipment:"hd_camera",consumables:{},spellcards:{Graciousness_Maze:1,Bright_Bitter_Wheel:1,Six_Roots_Clean:1,Centered_Flow:1,Future_Never_Survive:1},souvenir:"nodas_hat",role:"youmu",sugar:5,chance:{name:"轻松",type:"red",amount:0},health:80,coin:1e3,scene:"shrine",lv:50}),Ce=qe({resource:"dairi"}),ze=qe({enermy:["cirno","cirno"],event:[],target:[!0,!0,!0,!0,!1,!1],enermyLimit:4,lv:80}),He=qe({}),Ae=qe({});function Ie(e,t,n){const l=e.slice();return l[4]=t[n],l[6]=n,l}function Te(e,t){let n,l,a,s,o,r,i,u,d,m,f,p,h,v,g,y,_,x,$=(t[4].title?t[4].title:"提示")+"",E=t[4].content+"";function H(...e){return t[1](t[6],...e)}return{key:e,first:null,c(){n=j("div"),l=j("img"),s=M(),o=j("div"),r=j("txt"),i=q($),u=M(),d=j("txt"),m=q(E),f=M(),p=j("div"),h=M(),c(l.src,a="/icon/logo.svg")||S(l,"src","/icon/logo.svg"),S(l,"class","svelte-5596n7"),S(r,"class","title svelte-5596n7"),S(d,"class","content svelte-5596n7"),z(o,"margin-bottom","4px"),S(p,"class","tie svelte-5596n7"),S(n,"class","svelte-5596n7"),this.first=n},m(e,t){w(e,n,t),b(n,l),b(n,s),b(n,o),b(o,r),b(r,i),b(o,u),b(o,d),b(d,m),b(n,f),b(n,p),b(n,h),y=!0,_||(x=O(n,"click",H),_=!0)},p(e,n){t=e,(!y||1&n)&&$!==($=(t[4].title?t[4].title:"提示")+"")&&C(i,$),(!y||1&n)&&E!==(E=t[4].content+"")&&C(m,E)},i(e){y||(Z((()=>{y&&(g&&g.end(1),v=ue(n,$e,{duration:300}),v.start())})),y=!0)},o(e){v&&v.invalidate(),g=de(n,ke,{duration:300}),y=!1},d(e){e&&k(n),e&&g&&g.end(),_=!1,x()}}}function Be(e){let t,n,l=[],a=new Map,s=e[0];const o=e=>e[4].key;for(let t=0;t<s.length;t+=1){let n=Ie(e,s,t),r=o(n);a.set(r,l[t]=Te(r,n))}return{c(){t=j("div");for(let e=0;e<l.length;e+=1)l[e].c();S(t,"class","msg svelte-5596n7")},m(e,a){w(e,t,a);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,null);n=!0},p(e,[n]){1&n&&(s=e[0],se(),l=pe(l,n,o,1,e,s,a,t,fe,Te,null,Ie),oe())},i(e){if(!n){for(let e=0;e<s.length;e+=1)re(l[e]);n=!0}},o(e){for(let e=0;e<l.length;e+=1)ie(l[e]);n=!1},d(e){e&&k(t);for(let e=0;e<l.length;e+=1)l[e].d()}}}function Fe(e,t,n){let l;u(e,Ee,(e=>n(2,l=e)));let a=[];var s;function o(e){e.time=(new Date).getTime(),e.key=Math.random(),a.push(e),n(0,a=a.filter((t=>e.time-t.time<3e3)))}m(Ee,l.msg=o,l),window.msg=o,s=e=>n(0,a=a.filter((e=>(new Date).getTime()-e.time<3e3))),N().$$.before_update.push(s);return[a,(e,t)=>n(0,a=a.filter(((t,n)=>e!=n)))]}class Le extends xe{constructor(e){super(),_e(this,e,Fe,Be,o,{})}}var Ne={portable_money_box:{name:"便携式赛钱箱",detail:"每持有100硬币，伤害提高5%(每层+5%)。",type:"blue"},bronze_mirror:{name:"铜镜",detail:"攻击有25%概率额外对随机其它目标造成20%(每层+20%)伤害。",type:"blue"},mimosa:{name:"三片叶子的含羞草",detail:"敌人造成的伤害不会超过自身攻击力的300%(每层*95%)。",type:"blue"},compass_cat:{name:"罗盘猫",detail:"对敏捷高于自己的敌人伤害+10%(每层+10%)。",type:"blue"},bird_wine:{name:"雀酒",detail:"击败敌人时对全体敌人附加燃烧*1(每层+1)。",type:"blue"},frozen_frog:{name:"冻青蛙",detail:"战斗开始时速度+0.2(每层+0.2)，每回合结束时-0.2，直至该增益为0。",type:"blue"},fluorescent_zanthoxylum:{name:"荧光花椒",detail:"暴击率+5%",type:"blue"},corvis_feathers:{name:"鸦天狗羽毛",detail:"处于两个及以上正面效果下时，敏捷+0.05(每层+0.05)。",type:"blue"},sundial:{name:"日晷",detail:"间接伤害提高10%(每层+10%)。",type:"blue"},pickled_radish:{name:"腌萝卜",detail:"生命值高于95%时符卡造成的伤害+10%(每层+10%)。",type:"blue"},conch_shell:{name:"海螺壳",detail:"每次受到的伤害固定减少1(每层+1)。",type:"blue"},cursed_wind_chimes:{name:"被诅咒的风铃",detail:"造成600%(每层*95%)攻击力及以上的伤害时，使下一次攻击能驱散目标的所有正面效果。",type:"blue"},crypto_cloak:{name:"神隐斗篷",detail:"3%(每层+3%)几率闪避伤害。",type:"blue"},shy_rabbit:{name:"害羞兔",detail:"每第三次攻击造成的伤害+10%(每层+10%)。",type:"blue"},ghost_lantern:{name:"鬼行提灯",detail:"回合结束时，每剩余1点灵力，获得5%(每层+5%)最大生命值的临时防御结界。",type:"green"},vampires_old_tooth:{name:"吸血鬼的旧牙",detail:"攻击时回复0.5(每层+0.5)生命值。",type:"green"},large_roll_of_bandages:{name:"一大卷绷带",detail:"受到伤害的下一回合回复5%(每层+5%)当前生命值。",type:"green"},burning_seashore_flower:{name:"燃烧的彼岸花",detail:"每损失1%生命，获得0.2%(每层+0.2%)暴击率和0.01(每层+0.01)速度。",type:"green"},skyrocket:{name:"窜天猴",detail:"普通攻击30%概率造成1.5倍伤害并附带燃烧*1(每层+1)。",type:"green"},magic_dart:{name:"魔力飞镖",detail:"受到攻击时反击，造成伤害20%(每层+10%)的间接伤害。",type:"green"},fox_jade:{name:"狐玉",detail:"受到超过最大生命值40%(每层*95%)的伤害时抽一张牌。",type:"green"},cherry:{name:"石樱",detail:"20%(每层+20%)过量治疗量转化为临时防御结界。",type:"green"},earthy_spider_wine:{name:"土蜘蛛酒",detail:"普通攻击后符卡造成的伤害提高10%(每层+10%)，回合初清除。",type:"green"},amulet_of_full_moon:{name:"圆月护符",detail:"处于三个及以上负面效果下时，攻击造成的伤害增加10%(每层+10%)。",type:"green"},seal_needle:{name:"封魔针",detail:"累计造成八次伤害后，下次攻击对目标附加流血*1(每层+1)。",type:"green"},crown_of_thorns:{name:"荆棘礼冠",detail:"击败敌人时获得1(每层+1)额外灵力。",type:"green"},dimensional_pocket:{name:"次元纸袋",detail:"消耗品上限+1(每层+1)。",type:"green"},terrible_ring:{name:"很邪恶的戒指",detail:"场上每有一个敌人，暴击率+3%(每层+3%)。",type:"green"},red_and_white_scarf:{name:"红白围巾",detail:"生命值高于30%(每层*90%)时，受到致命伤会保留1生命值。",type:"red"},bottle_of_stars:{name:"装星星的瓶子",detail:"造成300%攻击力及以上的伤害时附加1(每层+1)颗星星，在下回合爆炸造成50%直接伤害。",type:"red"},normal_stone:{name:"普通的宝石",detail:"主动装备可使用次数加+1(每层+1)。",type:"red"},blade_of_yellow_spring:{name:"黄泉之刃",detail:"每回合获得1(每层+1)张额外普通攻击。",type:"red"},blood_book:{name:"鲜血魔导书",detail:"抽牌数+1(每层+1)。",type:"red"},human_soul_lamp:{name:"人魂灯",detail:"暴击伤害+50%(每层+50%)。",type:"red"},patchoulis_ribbon:{name:"帕秋莉的缎带",detail:"灵力上限+1(每层+1)。",type:"red"},fish_stone:{name:"鱼石",detail:"自身负面效果结算时所取层数减1(每层+1)。",type:"red"}},Re={gongonier:{name:"血之矢",detail:"被动。造成的伤害暴击时，回复伤害20%的生命值。"},sword_of_feixiang:{name:"绯想之剑",detail:"被动。对处于负面效果下的敌人造成的伤害+40%。"},sunshade:{name:"阳伞",detail:"主动。将30%生命值转化为200%防御结界。"},mirror_of_pear:{name:"净颇梨之镜",detail:"被动。普通攻击不消耗灵力。"},mini_bagua_stove:{name:"迷你八卦炉",detail:"主动。对全体敌人造成400%攻击力伤害。"},louguanjian:{name:"楼观剑",detail:"主动。扣除全体敌人20%当前生命值。"},hd_camera:{name:"高清相机",detail:"主动。驱散全体敌人身上的正面效果。"},repentance_rod:{name:"悔悟之棒",detail:"被动。抽空牌库时，获得等于此次抽牌数的额外灵力。"},circular_fan:{name:"团扇",detail:"被动。每打出1张符卡获得1张普通攻击。"}},De={nodas_hat:{name:"野田的帽子",detail:"生命值高于50%时受到伤害增加20%，低于50%时则减少30%。"},microlithic_fish:{name:"小石的鱼",detail:"受到伤害时70%概率获得随机负面效果(迟缓，燃烧，流血，疲倦)*1，30%概率阻挡本次伤害。"},ahabs_opinion:{name:"亚哈的意见",detail:"生命上限变为70%，战斗开始时回复全部生命值。"},mimicry_cat_pendant:{name:"拟态的猫挂件",detail:"使用符卡时，每有1灵力需求，扣除10%当前生命值，不消耗灵力。"},wanderlust:{name:"清泧的遨游术",detail:"手牌上限变为3，不受敏捷影响，每拥有1敏捷，回合初获得1额外灵力。"},miyanos_bottle:{name:"宫野的酒",detail:"回合结束时丢弃所有手牌，并获得等量额外灵力。"}},Pe={marisa:{name:"魔法弹",detail:"120%攻击力伤害",role:"marisa",output:{attack:[{type:"scale",value:"120",aim:"one"}]}},Stardust_Reverie:{name:"星尘幻想",detail:"对目标和其余敌人分别造成400%、80%攻击力伤害",role:"marisa",output:{attack:[{type:"scale",value:"400",aim:"one"},{type:"scale",value:"80",aim:"else"}]}},Master_Spark:{name:"极限火花",detail:"360%攻击力\n群体伤害\n下回合无法行动",role:"marisa",allAim:!0,output:{attack:[{type:"scale",value:"360",aim:"all"}],buff:[{value:"hypodynamic",amount:"1",aim:"self"}]}},Asteroid_Belt:{name:"小行星带",detail:"4x50%攻击力\n群体伤害",role:"marisa",allAim:!0,output:{attack:[{type:"scale",value:"50",aim:"all",amount:"4"}]}},Orrerys_Sun:{name:"太阳仪",detail:"本回合所有直接攻击\n转移到下回合\n造成120%间接伤害",role:"marisa",allAim:!0,output:{buff:[{value:"Orrerys_Sun",amount:"1",aim:"self"}]}},Earth_Light_Ray:{name:"地球光",detail:"将600%攻击力伤害平摊给所有敌人",role:"marisa",allAim:!0,output:{attack:[{type:"scale",value:"600",aim:"average"}]}},medicine:{},Nerve_Poison:{name:"神经之毒",detail:""},Melancholy_Poison:{name:"忧郁之毒",detail:""},Gassing_Garden:{name:"毒气花园",detail:""},Poison_Breath:{name:"猛毒气息",detail:""},Into_Delirium:{name:"进入疯狂",detail:""},reimu:{},Dream_Seal:{name:"梦想封印",detail:"分别对随机目标造成8*10%对方当前生命值的伤害不会暴击"},Demon_Seal_Circle:{name:"封魔阵",detail:"无效化目标下回合的直接攻击"},Double_Bound:{name:"二重结界",detail:"下一回合，受到伤害时会返还同样的伤害"},The_Jade:{name:"阴阳鬼神玉",detail:"对目标造成400%攻击力伤害"},Dream_Born:{name:"梦想天生",detail:"接下来的七次攻击有15%概率使自己免受一次伤害，第七次获得自身当前血量50%的护盾"},youmu:{name:"剑气",detail:"2*50%攻击力伤害",role:"youmu",output:{attack:[{type:"scale",value:"50",aim:"one",amount:"2"}]}},Bright_Bitter_Wheel:{name:"幽明的苦轮",detail:"接下来三次攻击\n额外60%间接伤害\n并获得1额外灵力",role:"youmu",allAim:!0,output:{buff:[{value:"Bright_Bitter_Wheel",amount:"3",aim:"self"}]}},Six_Roots_Clean:{name:"六根清净斩",detail:"下次受到攻击时闪避\n并造成180%攻击力\n群体伤害",role:"youmu",allAim:!0,output:{buff:[{value:"foresee",amount:"1",aim:"self"}],attack:[{type:"scale",value:"180",aim:"all",amount:"1"}]}},Centered_Flow:{name:"圆心流转斩",detail:"3*40%攻击力\n群体伤害，下次普攻伤害提高80%",role:"youmu",allAim:!0,output:{buff:[{value:"flow",amount:"1",aim:"self"}],attack:[{type:"scale",value:"40",aim:"all",amount:"3"}]}},Future_Never_Survive:{name:"未来永劫斩",detail:"360%攻击力伤害\n接下来三次普攻\n变为4*35%",role:"youmu",output:{buff:[{value:"yanfan",amount:"3",aim:"self"}],attack:[{type:"scale",value:"360",aim:"one",amount:"1"}]}},Graciousness_Maze:{name:"迷津慈航斩",detail:"普攻消耗灵力+1\n伤害提高200%\n回合初清除效果",role:"youmu",allAim:!0,output:{buff:[{value:"meditation_slash",amount:"1",aim:"self"}]}},pachi:{name:"魔力光束",detail:"100%攻击力伤害\n必定命中",role:"pachi"},royal_lare:{name:"皇家圣焰",detail:"精灵魔法:2/3/400%攻击力群体伤害\n附加燃烧*1/2/3",role:"pachi"},philosophers_stone:{name:"贤者之石",detail:"精灵魔法立即结算\n抽取一张符卡",role:"pachi"},silent_selene:{name:"沉静的月神",detail:"下一回合无法行动\n不受到任何伤害",role:"pachi"},silver_dragon:{name:"银龙",detail:"150%攻击力伤害\n精灵魔法:300/450/\n600%攻击力伤害",role:"pachi"},bury_in_lake:{name:"湖葬",detail:"每回合造成80%攻击力间接伤害，回复等量生命，持续3回合",role:"pachi"},jellyfish_princess:{name:"水母公主",detail:"每回合回复10%最大生命值并获得1额外灵力，持续3回合",role:"pachi"},sylphy_horn:{name:"风灵的角笛",detail:"精灵魔法:回复\n30%/45%/60%\n最大生命值",role:"pachi"},emerald_megalopolis:{name:"翡翠巨城",detail:"下一回合伤害提高\n20%，每造成一次伤害额外提高20%",role:"pachi"},alice:{name:"人偶千枪",detail:"100%攻击力伤害\n对于负面效果下的目标必定暴击",role:"alice"},artful_sacrifice:{name:"狡猾的献祭",detail:"清除随机人偶\n造成400%攻击力\n伤害",role:"alice"},return_inanimateness:{name:"回归虚无",detail:"清除所有人偶\n每清除1人偶\n造成60%群体伤害",role:"alice"},little_legion:{name:"小小军势",detail:"人偶造成两倍伤害\n持续一回合",role:"alice"},shanghai_doll:{name:"上海人偶",detail:"人偶:攻击150%\n耐久25%\n",role:"alice"},penglai_doll:{name:"蓬莱人偶",detail:"人偶:耐久1\n损坏时造成540%\n攻击力伤害",role:"alice"},kyoto_doll:{name:"京都人偶",detail:"人偶:攻击40%\n耐久25%，每回合\n获得2额外灵力",role:"alice"},xizang_doll:{name:"西藏人偶",detail:"人偶:攻击40%\n耐久70%",role:"alice"},london_doll:{name:"伦敦人偶",detail:"人偶:耐久40%\n每有1%耐久\n攻击5%",role:"alice"},russia_doll:{name:"俄罗斯人偶",detail:"人偶:耐久25%\n攻击80%\n造成群体伤害",role:"alice"},holland_doll:{name:"荷兰人偶",detail:"人偶:攻击40%\n耐久25%，在场时\n所有攻击附加流血*1",role:"alice"},orleans_doll:{name:"奥尔良人偶",detail:"人偶:攻击40%\n耐久25%，每回合回复15%最大生命值",role:"alice"}},We={marisa:{name:"雾雨魔理沙",detail:"弹幕最重要的是火力！",talent:"每回合初获得4额外灵力。",WIP:{shion:{name:"依神紫苑",detail:"失去的财产，还有运气究竟去了哪里呢。"},aya:{name:"射命丸文",detail:"来吧，我会手下留情的。"},reimu:{name:"博丽灵梦",detail:"超乎常人的幸运，她的直觉几乎一定会命中。",talent:"概率事件额外判定一次，取更好的那次。"}}},youmu:{name:"魂魄妖梦",detail:"半人半灵的半吊子。但是剑有两把。",talent:"所有暴击率转化为暴击伤害。\n每消耗一点灵力，获得通灵*1。\n每触发一次闪避减少通灵*3，并反击一次必定暴击的普攻。\n通灵:[10%(每层+10%)几率闪避下一次攻击。每回合初清空。]"},pachi:{name:"帕秋莉",detail:"居住在大图书馆中的魔女，非常擅长魔法。",talent:"精灵魔法：可选择咏唱2/3/4回合，时间越长威力越大。"},alice:{name:"爱丽丝",detail:"魔法森林中的，七色的奴隶主。",talent:"人偶：按刷新顺序阻挡伤害，耐久归零时清除，重复放置刷新耐久和结算顺序。"}},Ge={role:{marisa:e=>Ke(e,.9,.9,1,1),reimu:e=>Ke(e,1.2,1.2,1,6),shion:e=>Ke(e,1.1,1.1,1,5),medicine:e=>Ke(e,.9,.9,1,4),aya:e=>Ke(e,1,1,1.2,5),renko:e=>Ke(e,1,1,1,5),youmu:e=>Ke(e,.8,1.1,1.1,8),pachi:e=>Ke(e,.8,.8,1.1,8),alice:e=>Ke(e,.7,1,1,4)},enermy:{cirno:e=>Xe(e,1,1,1),piece:e=>Xe(e,1,1,1),lilywhite:e=>Xe(e,1,1,1),sunny:e=>Xe(e,1,1,1),lunar:e=>Xe(e,1,1,1),star:e=>Xe(e,1,1,1),eternity:e=>Xe(e,1,1,1)},amount:e=>{let t=4.2-1/Math.pow(2,e/32-2),n=t-parseInt(t),l=Number(Math.random()<n);return parseInt(t)+l}};function Ke(e,t,n,l,a){return{health:Math.ceil(Ze(e)*t),attack:Math.ceil(Ze(e)*n/6),speed:1+.02*e*l,power:a}}function Xe(e,t,n,l){return{health:Ue(Je(e)*t),attack:Ue(Je(e)*n/8),speed:1+.02*(e-1)*l}}function Ze(e){return parseInt(Math.pow(Math.E,e/(Math.E*Math.log(e+1)+Math.sqrt(e)/Math.E))+e+10)}function Je(e){return parseInt(Math.pow(Math.E,e/(Math.log(e+1)+Math.sqrt(e)))+e+10)}function Ue(e){return.95*e+Math.random().toFixed(2)*e*.1}function Ye(e,t,n){const l=e.slice();return l[34]=t[n],l[36]=n,l}function Qe(e,t,n){const l=e.slice();return l[37]=t[n],l[36]=n,l}function Ve(e,t){let n,l,s,o,r,i,c,u,d=t[37].data+"";function m(...e){return t[9](t[37],...e)}return{key:e,first:null,c(){n=j("div"),l=j("icon"),o=M(),r=j("txt"),i=q(d),z(l,"left",150+1.5*t[6][t[36]].x-16+"px"),z(l,"top",150+1.5*t[6][t[36]].y-16+"px"),S(l,"class",s="icon-"+t[37].type+" svelte-gqjxof"),z(r,"left",150+2.3*t[6][t[36]].x-25+"px"),z(r,"top",150+2.3*t[6][t[36]].y-16+"px"),S(r,"class","svelte-gqjxof"),S(n,"class","svelte-gqjxof"),this.first=n},m(e,a){w(e,n,a),b(n,l),b(n,o),b(n,r),b(r,i),c||(u=[O(n,"mouseenter",t[8]),O(n,"mousemove",m),O(n,"mouseleave",t[10])],c=!0)},p(e,n){t=e,4&n[0]&&z(l,"left",150+1.5*t[6][t[36]].x-16+"px"),4&n[0]&&z(l,"top",150+1.5*t[6][t[36]].y-16+"px"),4&n[0]&&s!==(s="icon-"+t[37].type+" svelte-gqjxof")&&S(l,"class",s),4&n[0]&&d!==(d=t[37].data+"")&&C(i,d),4&n[0]&&z(r,"left",150+2.3*t[6][t[36]].x-25+"px"),4&n[0]&&z(r,"top",150+2.3*t[6][t[36]].y-16+"px")},d(e){e&&k(n),c=!1,a(u)}}}function et(e){let t,n,l,a,s=[],o=new Map,r=Object.keys(e[4].collection);const i=e=>e[36];for(let t=0;t<r.length;t+=1){let n=Ye(e,r,t),l=i(n);o.set(l,s[t]=nt(l,n))}return{c(){t=j("div");for(let e=0;e<s.length;e+=1)s[e].c();S(t,"class","collection svelte-gqjxof")},m(e,n){w(e,t,n);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null);a=!0},p(e,n){24&n[0]&&(r=Object.keys(e[4].collection),s=pe(s,n,i,1,e,r,o,t,me,nt,null,Ye))},i(e){a||(Z((()=>{a&&(l&&l.end(1),n=ue(t,ke,{duration:200}),n.start())})),a=!0)},o(e){n&&n.invalidate(),l=de(t,ke,{duration:200}),a=!1},d(e){e&&k(t);for(let e=0;e<s.length;e+=1)s[e].d();e&&l&&l.end()}}}function tt(e){let t,n,l=Object.values(e[4].collection)[e[36]]+"";return{c(){t=j("txt"),n=q(l),S(t,"class","svelte-gqjxof")},m(e,l){w(e,t,l),b(t,n)},p(e,t){16&t[0]&&l!==(l=Object.values(e[4].collection)[e[36]]+"")&&C(n,l)},d(e){e&&k(t)}}}function nt(e,t){let n,l,s,o,r,i,c,u=Object.values(t[4].collection)[t[36]]>1,d=u&&tt(t);function m(...e){return t[22](t[34],...e)}return{key:e,first:null,c(){n=j("div"),l=j("icon"),o=M(),d&&d.c(),r=M(),S(l,"class",s="icon-"+t[34]+" svelte-gqjxof"),S(n,"class","svelte-gqjxof"),this.first=n},m(e,a){w(e,n,a),b(n,l),b(n,o),d&&d.m(n,null),b(n,r),i||(c=[O(n,"mouseenter",t[21]),O(n,"mousemove",m),O(n,"mouseleave",t[23])],i=!0)},p(e,a){t=e,16&a[0]&&s!==(s="icon-"+t[34]+" svelte-gqjxof")&&S(l,"class",s),16&a[0]&&(u=Object.values(t[4].collection)[t[36]]>1),u?d?d.p(t,a):(d=tt(t),d.c(),d.m(n,r)):d&&(d.d(1),d=null)},d(e){e&&k(n),d&&d.d(),i=!1,a(c)}}}function lt(e){let t,n,l,a;return{c(){t=j("div"),S(t,"class","spellcards svelte-gqjxof")},m(e,n){w(e,t,n),a=!0},i(e){a||(Z((()=>{a&&(l&&l.end(1),n=ue(t,ke,{duration:200}),n.start())})),a=!0)},o(e){n&&n.invalidate(),l=de(t,ke,{duration:200}),a=!1},d(e){e&&k(t),e&&l&&l.end()}}}function at(e){let t,n,l,a;return{c(){t=j("div"),S(t,"class","consumable svelte-gqjxof")},m(e,n){w(e,t,n),a=!0},i(e){a||(Z((()=>{a&&(l&&l.end(1),n=ue(t,ke,{duration:200}),n.start())})),a=!0)},o(e){n&&n.invalidate(),l=de(t,ke,{duration:200}),a=!1},d(e){e&&k(t),e&&l&&l.end()}}}function st(e){let t,n,l,s,o,r,i;return{c(){t=j("div"),n=j("icon"),s=M(),o=j("txt"),o.textContent="装备",S(n,"class",l="icon-"+e[4].equipment+" svelte-gqjxof"),S(o,"class","svelte-gqjxof"),S(t,"class","equipment svelte-gqjxof")},m(l,a){w(l,t,a),b(t,n),b(t,s),b(t,o),r||(i=[O(t,"mouseenter",e[24]),O(t,"mousemove",e[25]),O(t,"mouseleave",e[26])],r=!0)},p(e,t){16&t[0]&&l!==(l="icon-"+e[4].equipment+" svelte-gqjxof")&&S(n,"class",l)},d(e){e&&k(t),r=!1,a(i)}}}function ot(e){let t,n,l,s,o,r,i;return{c(){t=j("div"),n=j("icon"),s=M(),o=j("txt"),o.textContent="纪念品",S(n,"class",l="icon-"+e[4].souvenir+" svelte-gqjxof"),S(o,"class","svelte-gqjxof"),S(t,"class","souvenir svelte-gqjxof")},m(l,a){w(l,t,a),b(t,n),b(t,s),b(t,o),r||(i=[O(t,"mouseenter",e[27]),O(t,"mousemove",e[28]),O(t,"mouseleave",e[29])],r=!0)},p(e,t){16&t[0]&&l!==(l="icon-"+e[4].souvenir+" svelte-gqjxof")&&S(n,"class",l)},d(e){e&&k(t),r=!1,a(i)}}}function rt(e){let t,n,l,s,o,r,i,u,m,f,p,h,v,g,y,_,x,$,E,H,A,I,T,B,F,L,N,R,D,P,W,G,K,X,Z,J,U,Y,Q,V,ee,te,ne,le,ae,ce,ue,de,fe=[],he=new Map,ve=e[4].coin+"",ge=e[2];const ye=e=>e[36];for(let t=0;t<ge.length;t+=1){let n=Qe(e,ge,t),l=ye(n);he.set(l,fe[t]=Ve(l,n))}let be="collection"==e[1]&&et(e),_e="spellcards"==e[1]&&lt(),xe="consumable"==e[1]&&at(),we=e[4].equipment&&st(e),ke=e[4].souvenir&&ot(e);return{c(){t=j("div"),n=j("div"),n.innerHTML='<div class="title svelte-gqjxof"><icon class="icon-data svelte-gqjxof"></icon> \n      <txt class="svelte-gqjxof">思与想的境界</txt></div>',l=M(),s=j("div"),o=j("div"),r=j("txt"),r.textContent="(=￣ ρ￣=) ..zzZZ",i=M(),u=j("div");for(let e=0;e<fe.length;e+=1)fe[e].c();m=M(),f=j("img"),h=M(),v=j("div"),g=j("icon"),y=M(),_=j("txt"),x=q(ve),$=M(),E=j("div"),E.textContent="保存并回到标题界面",H=M(),A=j("div"),I=j("div"),T=j("div"),B=j("txt"),F=q("收藏品"),N=M(),R=j("txt"),D=q("牌库"),W=M(),G=j("txt"),K=q("消耗品"),Z=M(),J=j("div"),U=M(),Y=j("div"),Q=M(),be&&be.c(),V=M(),_e&&_e.c(),ee=M(),xe&&xe.c(),te=M(),ne=j("div"),we&&we.c(),le=M(),ke&&ke.c(),S(n,"class","info svelte-gqjxof"),S(n,"id","info"),S(r,"class","svelte-gqjxof"),c(f.src,p="/img/role/"+e[5].resource+"/"+e[4].role+".webp")||S(f,"src",p),S(f,"class","svelte-gqjxof"),S(u,"class","state svelte-gqjxof"),S(g,"class","coin icon-coin svelte-gqjxof"),S(_,"class","svelte-gqjxof"),S(v,"class","tip svelte-gqjxof"),z(v,"--width","200px"),S(E,"class","tip action svelte-gqjxof"),z(E,"--width","250px"),S(o,"class","left svelte-gqjxof"),S(B,"class",L=d("collection"==e[1]&&"selected")+" svelte-gqjxof"),S(R,"class",P=d("spellcards"==e[1]&&"selected")+" svelte-gqjxof"),S(G,"class",X=d("consumable"==e[1]&&"selected")+" svelte-gqjxof"),S(T,"class","index svelte-gqjxof"),S(J,"class","bookmark svelte-gqjxof"),S(Y,"class","bg svelte-gqjxof"),S(I,"class","item svelte-gqjxof"),S(ne,"class","other svelte-gqjxof"),S(A,"class","right svelte-gqjxof"),S(s,"class","main svelte-gqjxof"),S(t,"class",ae="body "+(e[0]&&"menu")+" "+e[4].role+" svelte-gqjxof")},m(a,c){w(a,t,c),b(t,n),b(t,l),b(t,s),b(s,o),b(o,r),b(o,i),b(o,u);for(let e=0;e<fe.length;e+=1)fe[e]&&fe[e].m(u,null);b(u,m),b(u,f),b(o,h),b(o,v),b(v,g),b(v,y),b(v,_),b(_,x),b(o,$),b(o,E),b(s,H),b(s,A),b(A,I),b(I,T),b(T,B),b(B,F),b(T,N),b(T,R),b(R,D),b(T,W),b(T,G),b(G,K),b(I,Z),b(I,J),b(I,U),b(I,Y),b(I,Q),be&&be.m(I,null),b(I,V),_e&&_e.m(I,null),b(I,ee),xe&&xe.m(I,null),b(A,te),b(A,ne),we&&we.m(ne,null),b(ne,le),ke&&ke.m(ne,null),ce=!0,ue||(de=[O(f,"mouseenter",e[11]),O(f,"mousemove",e[12]),O(f,"mouseleave",e[13]),O(v,"mouseenter",e[14]),O(v,"mousemove",e[15]),O(v,"mouseleave",e[16]),O(E,"click",e[17]),O(B,"click",e[18]),O(R,"click",e[19]),O(G,"click",e[20])],ue=!0)},p(e,n){92&n[0]&&(ge=e[2],fe=pe(fe,n,ye,1,e,ge,he,u,me,Ve,m,Qe)),(!ce||48&n[0]&&!c(f.src,p="/img/role/"+e[5].resource+"/"+e[4].role+".webp"))&&S(f,"src",p),(!ce||16&n[0])&&ve!==(ve=e[4].coin+"")&&C(x,ve),(!ce||2&n[0]&&L!==(L=d("collection"==e[1]&&"selected")+" svelte-gqjxof"))&&S(B,"class",L),(!ce||2&n[0]&&P!==(P=d("spellcards"==e[1]&&"selected")+" svelte-gqjxof"))&&S(R,"class",P),(!ce||2&n[0]&&X!==(X=d("consumable"==e[1]&&"selected")+" svelte-gqjxof"))&&S(G,"class",X),"collection"==e[1]?be?(be.p(e,n),2&n[0]&&re(be,1)):(be=et(e),be.c(),re(be,1),be.m(I,V)):be&&(se(),ie(be,1,1,(()=>{be=null})),oe()),"spellcards"==e[1]?_e?2&n[0]&&re(_e,1):(_e=lt(),_e.c(),re(_e,1),_e.m(I,ee)):_e&&(se(),ie(_e,1,1,(()=>{_e=null})),oe()),"consumable"==e[1]?xe?2&n[0]&&re(xe,1):(xe=at(),xe.c(),re(xe,1),xe.m(I,null)):xe&&(se(),ie(xe,1,1,(()=>{xe=null})),oe()),e[4].equipment?we?we.p(e,n):(we=st(e),we.c(),we.m(ne,le)):we&&(we.d(1),we=null),e[4].souvenir?ke?ke.p(e,n):(ke=ot(e),ke.c(),ke.m(ne,null)):ke&&(ke.d(1),ke=null),(!ce||17&n[0]&&ae!==(ae="body "+(e[0]&&"menu")+" "+e[4].role+" svelte-gqjxof"))&&S(t,"class",ae)},i(e){ce||(re(be),re(_e),re(xe),ce=!0)},o(e){ie(be),ie(_e),ie(xe),ce=!1},d(e){e&&k(t);for(let e=0;e<fe.length;e+=1)fe[e].d();be&&be.d(),_e&&_e.d(),xe&&xe.d(),we&&we.d(),ke&&ke.d(),ue=!1,a(de)}}}function it(e,t,n){let l,a,s,o;u(e,Me,(e=>n(30,l=e))),u(e,Se,(e=>n(4,a=e))),u(e,Oe,(e=>n(31,s=e))),u(e,Ce,(e=>n(5,o=e)));const r=function(e){n(2,m=f()),e.preventDefault(),"Index"!=l&&n(0,c=!c)};let i,c=!1,d="collection",m=f();R((e=>n(3,i=s)));function f(){let e=Ge.role[a.role](a.lv);return[{type:"maxHealth",name:"最大生命值",detail:"显而易见，生命值不会超过这个数。\n只有等级才能让这个数字提升。",data:e.health},{type:"attack",name:"攻击力",detail:"所有攻击都以这个数为基础。不过也有例外。\n只有等级才能让这个数字提升。",data:e.attack},{type:"speed",name:"速度",detail:"决定了回合中行动的自由度，速度快，能做的事也就会更多。\n抽牌数=基础抽牌数+(速度-敌人平均速度)，小数点后面部分就是多抽一张的概率。\n手牌上限=抽牌数+速度四舍五入。",data:e.speed},{type:"power",name:"灵力",detail:"牌左上角的数字就是其灵力消耗。灵力每回合初都会回复至上限。\n额外灵力：等同于灵力，优先消耗，上限等同于牌库总牌数。",data:e.power},{type:"health",name:"生命值",detail:"必须不让它归零才行。",data:a.health},{type:"sugar",name:"糖",detail:"面临选择时可用选项的数量。",data:a.sugar},{type:"level",name:"等级",detail:"等级越高越强大。\n只能通过战斗提升等级。",data:a.lv},{type:"chance",name:"机会",detail:`剩余${a.chance.amount}次战败时回到战斗前的机会。机会消耗时，回复生命值并获得一件${{blue:"普通",green:"稀有",red:"传奇"}[a.chance.type]}收藏品。`,data:a.chance.amount}]}return[c,d,m,i,a,o,[{x:50,y:0},{x:35.4,y:-35.4},{x:0,y:-50},{x:-35.4,y:-35.4},{x:-50,y:0},{x:-35.4,y:35.4},{x:0,y:50},{x:35.4,y:35.4}],r,e=>i.show(e),(e,t)=>i.move(t,e,"chance"==e.type?a.chance.type:"blue"),e=>i.hide(),e=>i.show(e),e=>i.move(e,{name:We[a.role].name,detail:We[a.role].talent},"blue"),e=>i.hide(),e=>i.show(e),e=>i.move(e,{name:"硬币",detail:"对，这是钱。"},"gold"),e=>i.hide(),e=>{n(0,c=!1)},e=>n(1,d="collection"),e=>n(1,d="spellcards"),e=>n(1,d="consumable"),e=>i.show(e),(e,t)=>i.move(t,Ne[e],Ne[e].type),e=>i.hide(),e=>i.show(e),e=>i.move(e,Re[a.equipment],"gold"),e=>i.hide(),e=>i.show(e),e=>i.move(e,De[a.souvenir],"purple"),e=>i.hide()]}class ct extends xe{constructor(e){super(),_e(this,e,it,rt,o,{menu:7},null,[-1,-1])}get menu(){return this.$$.ctx[7]}}function ut(e){let t,n,l,a,s,o,r,i,c;return{c(){t=j("div"),n=j("span"),l=q(e[0]),a=M(),s=j("a"),o=q(e[1]),z(n,"background-color","var(--"+e[2]+")"),S(n,"class","svelte-1i6kzq4"),S(s,"class","svelte-1i6kzq4"),S(t,"class","explain svelte-1i6kzq4"),z(t,"left",e[3]+"px"),z(t,"top",e[4]+"px"),z(t,"visibility",e[0]?"visible":"hidden")},m(r,i){w(r,t,i),b(t,n),b(n,l),b(t,a),b(t,s),b(s,o),e[7](t),c=!0},p(e,a){(!c||1&a)&&C(l,e[0]),(!c||4&a)&&z(n,"background-color","var(--"+e[2]+")"),(!c||2&a)&&C(o,e[1]),(!c||8&a)&&z(t,"left",e[3]+"px"),(!c||16&a)&&z(t,"top",e[4]+"px"),(!c||1&a)&&z(t,"visibility",e[0]?"visible":"hidden")},i(e){c||(Z((()=>{c&&(i&&i.end(1),r=ue(t,ke,{duration:100}),r.start())})),c=!0)},o(e){r&&r.invalidate(),i=de(t,ke,{duration:100}),c=!1},d(n){n&&k(t),e[7](null),n&&i&&i.end()}}}function dt(e){let t,n,l="show"==e[5]&&ut(e);return{c(){l&&l.c(),t=E()},m(e,a){l&&l.m(e,a),w(e,t,a),n=!0},p(e,[n]){"show"==e[5]?l?(l.p(e,n),32&n&&re(l,1)):(l=ut(e),l.c(),re(l,1),l.m(t.parentNode,t)):l&&(se(),ie(l,1,1,(()=>{l=null})),oe())},i(e){n||(re(l),n=!0)},o(e){ie(l),n=!1},d(e){l&&l.d(e),e&&k(t)}}}function mt(e,t,n){let l,a,s,o,r,i;u(e,Oe,(e=>n(8,l=e)));let c,d="hide";return m(Oe,l={move:(e,t,l)=>{n(0,a=t.name),n(1,s=t.detail),n(2,o=l),n(3,r=document.body.clientWidth-e.x>240?e.x+5:document.body.clientWidth-240),n(4,i=e.y-c.offsetHeight-5)},show:e=>{n(5,d="show"),n(3,r=document.body.clientWidth-e.x>240?e.x+5:document.body.clientWidth-240)},hide:e=>n(5,d="hide")},l),[a,s,o,r,i,d,c,function(e){P[e?"unshift":"push"]((()=>{c=e,n(6,c)}))}]}class ft extends xe{constructor(e){super(),_e(this,e,mt,dt,o,{})}}var pt=["啊啊啊我忘记了","阿吽","阿卡麟","阿空","阿燐","阿求","艾丽","爱丽丝","爱丽丝的魔法书","爱丽丝梦游仙境","爱丽丝威震天","爱莲","爱塔妮缇拉尔瓦","庵我烧了","奥莲姬","八百万之神","八坂神奈子","八分咲","八卦炉","八桥","八意永琳","八云蓝","八云紫","百鬼夜行","白鹭风茗","稗田阿求","百万鬼夜行","百药枡","白玉楼","半白泽","坂田合欢乃","宝宝巴士","抱头蹲防","包子仙","本居小铃","本子仙","彼岸","彼岸归航","比那名居天子","弁弁","博丽","博丽大结界","博丽结界","博丽灵梦","博丽神社","博丽神社例大祭","布都","布嘟嘟","不认识的孩子","不朽的曼珠沙华","擦弹","残机","缠流子","车车人","车万","沉默的兽灵","成美","赤蛮奇","重生","畜生界","畜生们的休息","船幽灵","船长","纯狐","纯妈","茨歌仙","茨木华扇","从地下的归还","萃梦想","萃香","村纱水蜜","大蛾子","大根","大蛤蟆之池","大酱","大结界","大鹫灵","大狸子","大妖精","大玉","弹幕","弹幕射击","弹幕邪天鬼","弹幕战","道中","得点","地底通路","敌机","地灵殿","地狱鸦","掉残","弔姐","吊瓶妖","凋叶棕","丁礼田","丁礼田舞","东方","东方蝉时歌","东方茨歌仙","东方萃梦想","东方大炮弹","东方大往生","东方大战争","东方地灵殿","东方绯想天","东方非想天则","东方封魔录","东方风神录","东方绀珠传","东方刚欲异闻","东方怪绮谈","东方鬼形兽","东方红楼梦","东方红魔乡","东方华烂漫","东方花映冢","东方幻想乡","东方辉针城","东方铃奈庵","东方灵异传","东方梦灵梦","东方梦时空","东方儚月抄","东方凭依华","东方清泉飨","东方求闻口授","东方求闻史纪","东方三月精","东方神灵庙","东方深秘录","东方失去之言","东方四季呗","东方天空璋","东方天上花","东方童楼遥","东方外来韦编","东方文花帖","东方香霖堂","东方心绮楼","东方星莲船","东方妖妖梦","东方萤灯筏","东方樱蝶梦","东方樱神月","东方永夜抄","东方游剧天","东方智灵奇传","东方紫香花","东方醉蝶华","东风谷早苗","动物灵","毒奶","多多良小伞","哆来咪","哆来咪苏伊特","谔谔","噩梦日记","二次创作","二设","二婶子","二岩猯藏","尔子田","尔子田里乃","法界","反魂蝶","芳香","防撞桶","非符","非想天","丰聪耳神子","风见幽香","疯帽子茶会","封魔录","风神录","封兽鵺","风之暗穴","疯中二婶子","符卡","符卡规则","芙兰","芙兰朵露","付丧神","尬舞姐妹","感情的摩天楼","绀珠传","刚欲同盟","刚欲异闻","高丽野阿吽","格斗","宫古芳香","狗椛","固定弹","鼓哥","鼓姐","古明地觉","古明地恋","怪力乱神","怪绮谈","广西烧烤摊老板","广有射怪鸟事","鬼畜妹","袿姬","鬼杰组","鬼杰组组长","鬼人正邪","鬼形兽","果果","过膝袜","航哥","好吗","河城荷取","赫卡","赫卡姐","赫卡提亚","荷取","核融炉","河童","黑谷山女","黑历史","红楼","红美铃","红萌馆","红魔馆","红魔乡","红银","红字本","虎哥","胡桃","冴月麟","椛椛","花开夜","华扇","华扇邸","花映冢","坏苹果","欢姐","幻梦缘起","幻视之夜","幻想万华镜","幻想夏乡","幻想乡","幻想乡空闪姬","幻想乡空战姬","幻想乡少女大战","幻想乡玩家","幻想跃迁实验室","幻缘团","幻月","幻跃团","黄昏立绘","辉夜","慧音","辉针城","辉针城的小人族","魂魄妖忌","魂魄妖梦","火车","霍青娥","火焰猫燐","吉弔","吉弔八千慧","姬海棠果","姬海棠极","姬海棠羽立","鸡妹","寄世界于偶像","键山雏","间歇泉","奖残","奖分","姐贵","结界","禁忌的魔法","矜羯罗","今泉影狼","今天也是好天气","今昔幻想乡","劲牙组","劲牙组组长","堇子","京都幻想剧团","静叶","囧仙","囧仙子","旧地狱遗址","旧都","九十九八桥","九十九弁弁","九天瀑布","菊理","决死符","卡娜安娜贝拉尔","考据党","可悲的人偶","克劳恩","克劳恩皮丝","堀川雷鼓","狂气之瞳","蓝妈","狼女","老娘是最强","乐航","乐囧","蕾蒂","蕾蒂霍瓦特洛克","蕾拉","蕾米","雷咪","蕾米莉亚","例大祭","莉格露","莉格露奈特巴格","骊驹早鬼","莉莉","莉莉白","莉莉黑","莉莉霍瓦特","莉莉卡","里乃","里香","恋恋","莲妈","莲子","铃二","铃瑚","灵力","灵梦","铃奈庵","灵乌路空","铃仙","铃仙二号","灵异传","灵知的太阳信仰","留琴","辘轳首","露米娅","露娜","露娜切露德","露娜萨","露易兹","轮椅战神","萝卜","洛天依","绿头发的爸爸","绿眼的嫉妒","玛艾露贝莉赫恩","玛格特罗依德邸","麻将山","玛露奇","满福神社","馒馒来","毛玉","梅蒂欣梅兰可莉","美国酱","妹红","梅丽","梅莉","美铃","梅露兰","魅魔","梦殿大祀庙","梦时空","梦想天生","梦消失","梦月","儚月抄","梦子","秘封","蜜蜂","秘封厨","秘封噩梦日记","秘封活动记录","秘封组","米国酱","米国小妖精","咪咪号","秘神摩多罗","米斯蒂娅","米斯蒂娅萝蕾拉","迷途之家","迷途竹林","面灵气","绵月丰姬","绵月依姬","苗苗","苗爷","冥界","命莲","命莲寺","明罗","摸多了硬起来","摩多罗","摩多罗隐岐奈","魔法森林","魔法使","魔理沙","摩妈","磨米机","摩托罗拉","摩西的奇迹","娜兹玲","牛妈","牛崎润美","女苑","帕露西","帕琪","帕秋莉","帕秋莉诺蕾姬","判定点","蓬莱人","蓬莱山辉夜","凭依华","琪露诺","骑士之夜","琪斯美","千年幻想乡","桥姬","秦河胜","秦心","青娥","清兰","青蛙子","秋静叶","秋穰子","求闻口授","求闻史纪","犬走椛","穰子","人间之里","人形裁判","人形使","人鱼","戎璎花","入道","乳町","若鹭姬","萨拉","萨丽艾尔","三分咲","三途川","伞妖","三月精","桑尼","桑尼米尔克","骚灵","森近霖之助","山姥","山女","山彦","上白泽慧音","烧烤摊老板","少名针妙丸","少女幻葬","少女绮想曲","射命丸文","社团","神话幻想","神灵","神灵庙","神妈","深秘录","神奈子","神绮","神社闭店之日","神玉","神子","圣白莲","圣德传说","圣德太子","圣德太子的马","圣德太子的天马","圣莲船","生死之境","世界美咲剧场","十六夜","十六夜咲夜","矢田寺成美","兽道","寿命论","兽娘幻想入","兽人","守矢神社","双七","水桥帕露西","水獭灵","四重存在","四季","四季大人","四季撒吗","四季撒吗我有罪","四季映姬","斯卡雷特","死灵","死神","四十米大刀","斯塔","斯塔萨菲娅","死亡幻想曲","寺子屋","苏格拉底","苏我屠自古","随机弹","砕月","碎月","太田顺也","太阳花田","太子的马","探女","探女老仙","陶瓷的杖刀人","藤原妹红","天狗","天空璋","天人","天探女","天邪鬼","天子","条纹过膝袜","庭渡久侘歌","同人","土蜘蛛","土著信仰","屠自古","豚乙女","外界","外来人","外来韦编","亡灵","威严满满","胃炎满满","文花帖","文文","我会自己上厕所","我做东方鬼畜音","物部布都","五分咲","无何有之乡","无名之丘","雾雨","雾雨魔理沙","无缘冢","雾之湖","稀神探女","西行寺幽幽子","吸血鬼","下压","仙界","现界","仙人","现世的秘术师","香霖堂","乡长","响子","消弹","小町","小恶魔","小老帝","小铃","小米弹","小人族","小伞","小桶","小兔姬","小碗","小五","咲夜","小野冢小町","泄矢诹访子","心酱","心绮楼","心之所在","星莲船","星条旗的小丑","星熊杯","星熊勇仪","幸运与不幸","星之器","续关","玄武之泽","玄爷","玄云海","阎魔","妖虫","妖怪狸","妖怪鼠","妖怪之山","妖精","妖精大战争","妖梦","妖兽","妖兔","妖妖跋扈","妖妖梦","鵺酱","野狼灵","野蛮至极","爷们红","夜雀","爷是恋恋","一般通过","一般通过山女","异变","伊吹萃香","伊吹瓢","伊吹西瓜","一分咲","衣玖","依莉斯","一轮","一设","依神女苑","依神紫苑","易者","引弹","因幡帝","因幡天为","隐匿的四季","隐岐奈","寅丸星","阴阳玉","樱花樱花","影狼","永动之龛","永江衣玖","永琳","永夜抄","勇仪","永远的春梦","永远的满月","永远亭","幽闭星光","有顶天","幽谷响子","幽幻魔眼","油库里","幽灵","幽冥结界","幽香","幽幽子","御伽之国的鬼岛","玉米棒子","欲望加速","宇佐见堇子","宇佐见莲子","原点组","原始的节拍","远野幻想物语","越共","乐器妖怪","月人","月时计","月兔","月之都","云居一轮","云山","再思之道","早鬼","早苗","杖刀偶磨弓","长者","折返","这是好的","真吉八弔","针妙丸","正邪","埴安神袿姬","智灵奇传","埴轮兵长","中弹","终符","朱鹭子","竹取飞翔","转转","壮族大妈","自机","自机狙","紫老太","紫妈","紫妹","紫奶奶","紫婆婆","紫香花","紫苑","诹访湖","诹访子","醉蝶华","佐渡的二岩"];function ht(e,t,n){const l=e.slice();return l[16]=t[n],l[18]=n,l}function vt(e){let t,n,l,a;const s=[yt,gt],o=[];return t=0,n=o[0]=s[0](e),{c(){n.c(),l=E()},m(e,t){o[0].m(e,t),w(e,l,t),a=!0},p(e,t){n.p(e,t)},i(e){a||(re(n),a=!0)},o(e){ie(n),a=!1},d(e){o[0].d(e),e&&k(l)}}}function gt(t){let n,l,a;return{c(){n=j("txt"),n.textContent="Press Any Key",S(n,"class","launch svelte-s9r93r")},m(e,t){w(e,n,t),a=!0},p:e,i(e){a||(l&&l.end(1),a=!0)},o(e){l=de(n,ke,{duration:250}),a=!1},d(e){e&&k(n),e&&l&&l.end()}}}function yt(e){let t,n,l,a=[],s=new Map,o=[e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10]];const r=e=>e[18];for(let t=0;t<10;t+=1){let n=ht(e,o,t),l=r(n);s.set(l,a[t]=bt(l,n))}return{c(){t=j("div");for(let e=0;e<10;e+=1)a[e].c();S(t,"class","words svelte-s9r93r")},m(e,n){w(e,t,n);for(let e=0;e<10;e+=1)a[e]&&a[e].m(t,null);l=!0},p(e,n){2046&n&&(o=[e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10]],a=pe(a,n,r,1,e,o,s,t,me,bt,null,ht))},i(e){l||(n&&n.end(1),l=!0)},o(e){n=de(t,ke,{duration:250}),l=!1},d(e){e&&k(t);for(let e=0;e<10;e+=1)a[e].d();e&&n&&n.end()}}}function bt(e,t){let n,l,a,s=t[16].word+"";return{key:e,first:null,c(){n=j("txt"),l=q(s),a=M(),z(n,"left",t[16].x),z(n,"top",t[16].y),z(n,"font-size",26-8*kt()+"px"),z(n,"animation-delay",.2*t[18]+"s"),S(n,"class","svelte-s9r93r"),this.first=n},m(e,t){w(e,n,t),b(n,l),b(n,a)},p(e,a){t=e,2046&a&&s!==(s=t[16].word+"")&&C(l,s),2046&a&&z(n,"left",t[16].x),2046&a&&z(n,"top",t[16].y),2046&a&&z(n,"animation-delay",.2*t[18]+"s")},d(e){e&&k(n)}}}function _t(e){let t;return{c(){t=j("txt"),t.textContent="幻想异闻录",S(t,"class","title svelte-s9r93r")},m(e,n){w(e,t,n)},d(e){e&&k(t)}}}function xt(t){let n,l,s,o,r,i,c,u,d,m,f;return{c(){n=j("div"),l=j("txt"),l.textContent="开始",s=M(),o=j("txt"),o.textContent="灵感",r=M(),i=j("txt"),i.textContent="设定",c=M(),u=j("txt"),u.textContent="离去",S(l,"class","svelte-s9r93r"),S(o,"class","svelte-s9r93r"),S(i,"class","svelte-s9r93r"),S(u,"class","svelte-s9r93r"),S(n,"class","menu svelte-s9r93r")},m(e,a){w(e,n,a),b(n,l),b(n,s),b(n,o),b(n,r),b(n,i),b(n,c),b(n,u),m||(f=[O(l,"click",t[12]),O(o,"click",t[13])],m=!0)},p:e,i(e){d||Z((()=>{d=ue(n,ke,{delay:250,duration:250}),d.start()}))},o:e,d(e){e&&k(n),m=!1,a(f)}}}function wt(e){let t,n,l,a,s,o,r,i,c=!e[0]&&vt(e);let u=_t(e),d=e[0]&&xt(e);return{c(){t=j("div"),c&&c.c(),n=M(),u.c(),l=M(),d&&d.c(),S(t,"class","body svelte-s9r93r")},m(a,s){w(a,t,s),c&&c.m(t,null),b(t,n),u.m(t,null),b(t,l),d&&d.m(t,null),o=!0,r||(i=O(t,"click",e[14],{once:!0}),r=!0)},p(e,[l]){e[0]?c&&(se(),ie(c,1,1,(()=>{c=null})),oe()):c?(c.p(e,l),1&l&&re(c,1)):(c=vt(e),c.c(),re(c,1),c.m(t,n)),e[0]?d?(d.p(e,l),1&l&&re(d,1)):(d=xt(e),d.c(),re(d,1),d.m(t,null)):d&&(d.d(1),d=null)},i(e){o||(re(c),re(d),Z((()=>{o&&(s&&s.end(1),a=ue(t,ke,{duration:250}),a.start())})),o=!0)},o(e){ie(c),a&&a.invalidate(),s=de(t,ke,{duration:250}),o=!1},d(e){e&&k(t),c&&c.d(),u.d(),d&&d.d(),e&&s&&s.end(),r=!1,i()}}}function kt(){return Math.random()}function $t(e,t,n){let l;u(e,Me,(e=>n(11,l=e)));let a=!1,s=g(),o=g(),r=g(),i=g(),c=g(),d=g(),f=g(),p=g(),h=g(),v=g();function g(){return{x:-40-160*kt()+"px",y:80-160*kt()+"px",word:pt[Math.floor(kt()*pt.length)]}}setTimeout((e=>setInterval((e=>n(1,s=g())),2e3)),0),setTimeout((e=>setInterval((e=>n(2,o=g())),2e3)),200),setTimeout((e=>setInterval((e=>n(3,r=g())),2e3)),400),setTimeout((e=>setInterval((e=>n(4,i=g())),2e3)),600),setTimeout((e=>setInterval((e=>n(5,c=g())),2e3)),800),setTimeout((e=>setInterval((e=>n(6,d=g())),2e3)),1e3),setTimeout((e=>setInterval((e=>n(7,f=g())),2e3)),1200),setTimeout((e=>setInterval((e=>n(8,p=g())),2e3)),1400),setTimeout((e=>setInterval((e=>n(9,h=g())),2e3)),1600),setTimeout((e=>setInterval((e=>n(10,v=g())),2e3)),1800);return[a,s,o,r,i,c,d,f,p,h,v,l,e=>m(Me,l="Foreword",l),e=>m(Me,l="Afflatus",l),e=>n(0,a=!0)]}class jt extends xe{constructor(e){super(),_e(this,e,$t,wt,o,{})}}function qt(e,t,n){const l=e.slice();return l[26]=t[n],l}function Mt(e,t,n){const l=e.slice();return l[29]=t[n],l}function Et(e,t,n){const l=e.slice();return l[26]=t[n],l}function Ot(e,t,n){const l=e.slice();return l[34]=t[n],l}function St(e){let t,n,l,a=[],s=new Map,o=[0,1,2,3,4];const r=e=>e[34];for(let t=0;t<5;t+=1){let n=Ot(e,o,t),l=r(n);s.set(l,a[t]=Ct(l,n))}return{c(){t=j("div");for(let e=0;e<5;e+=1)a[e].c();S(t,"class","sugar svelte-oqxjfi")},m(e,n){w(e,t,n);for(let e=0;e<5;e+=1)a[e]&&a[e].m(t,null);l=!0},p(e,n){1544&n[0]&&(o=[0,1,2,3,4],a=pe(a,n,r,1,e,o,s,t,me,Ct,null,Ot))},i(e){l||(n&&n.end(1),l=!0)},o(e){n=de(t,ke,{duration:150}),l=!1},d(e){e&&k(t);for(let e=0;e<5;e+=1)a[e].d();e&&n&&n.end()}}}function Ct(e,t){let n,l,s,o;function r(...e){return t[13](t[34],...e)}function i(...e){return t[14](t[34],...e)}return{key:e,first:null,c(){n=j("icon"),S(n,"class","icon-sugar svelte-oqxjfi"),S(n,"style",l=""+(t[9][t[34]]+(t[34]<=t[3]&&"filter:drop-shadow(0 0 4px #777)"))),this.first=n},m(e,t){w(e,n,t),s||(o=[O(n,"mouseenter",r),O(n,"click",i)],s=!0)},p(e,a){t=e,8&a[0]&&l!==(l=""+(t[9][t[34]]+(t[34]<=t[3]&&"filter:drop-shadow(0 0 4px #777)")))&&S(n,"style",l)},d(e){e&&k(n),s=!1,a(o)}}}function zt(e){let t,n,l=["easy","normal","hard"],a=[];for(let t=0;t<3;t+=1)a[t]=Ht(Et(e,l,t));const s=e=>ie(a[e],1,1,(()=>{a[e]=null}));return{c(){t=j("div");for(let e=0;e<3;e+=1)a[e].c();S(t,"class","chance svelte-oqxjfi")},m(e,l){w(e,t,l);for(let e=0;e<3;e+=1)a[e]&&a[e].m(t,null);n=!0},p(e,n){if(1169&n[0]){let o;for(l=["easy","normal","hard"],o=0;o<3;o+=1){const s=Et(e,l,o);a[o]?(a[o].p(s,n),re(a[o],1)):(a[o]=Ht(s),a[o].c(),re(a[o],1),a[o].m(t,null))}for(se(),o=3;o<3;o+=1)s(o);oe()}},i(e){if(!n){for(let e=0;e<3;e+=1)re(a[e]);n=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<3;e+=1)ie(a[e]);n=!1},d(e){e&&k(t),$(a,e)}}}function Ht(e){let t,n,l,s,o,r,i,c,u,d,m=e[7][e[26]].name+"";function f(...t){return e[16](e[26],...t)}function p(...t){return e[18](e[26],...t)}return{c(){t=j("div"),n=j("txt"),l=q(m),s=M(),o=j("icon"),r=M(),S(n,"class","svelte-oqxjfi"),S(o,"class","icon-select svelte-oqxjfi"),S(t,"class","svelte-oqxjfi")},m(a,i){w(a,t,i),b(t,n),b(n,l),b(t,s),b(t,o),b(t,r),c=!0,u||(d=[O(t,"mouseenter",e[15]),O(t,"mousemove",f),O(t,"mouseleave",e[17]),O(t,"click",p)],u=!0)},p(t,n){e=t},i(e){c||(i&&i.end(1),c=!0)},o(e){i=de(t,$e,{duration:200}),c=!1},d(e){e&&k(t),e&&i&&i.end(),u=!1,a(d)}}}function At(e){let t,n,l,a=Object.keys(We).rd().splice(-e[2].sugar),s=[];for(let t=0;t<a.length;t+=1)s[t]=It(Mt(e,a,t));return{c(){t=j("div");for(let e=0;e<s.length;e+=1)s[e].c();S(t,"class","role svelte-oqxjfi")},m(e,n){w(e,t,n);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null);l=!0},p(e,n){if(1092&n[0]){let l;for(a=Object.keys(We).rd().splice(-e[2].sugar),l=0;l<a.length;l+=1){const o=Mt(e,a,l);s[l]?s[l].p(o,n):(s[l]=It(o),s[l].c(),s[l].m(t,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=a.length}},i(e){l||(n&&n.end(1),l=!0)},o(e){n=de(t,ke,{duration:150}),l=!1},d(e){e&&k(t),$(s,e),e&&n&&n.end()}}}function It(e){let t,n,l,a,s,o,r,i,u,d,m,f,p,h=We[e[29]].name+"",v=We[e[29]].detail+"";function g(...t){return e[19](e[29],...t)}return{c(){t=j("div"),n=j("img"),a=M(),s=j("div"),o=j("txt"),r=q(h),i=M(),u=j("txt"),d=q(v),m=M(),c(n.src,l="/img/role/"+e[6].resource+"/"+e[29]+".webp")||S(n,"src",l),S(n,"class","svelte-oqxjfi"),S(o,"class","name svelte-oqxjfi"),S(u,"class","detail svelte-oqxjfi"),S(s,"class","svelte-oqxjfi"),z(t,"background-image","var(--"+e[29]+")"),S(t,"class","svelte-oqxjfi")},m(e,l){w(e,t,l),b(t,n),b(t,a),b(t,s),b(s,o),b(o,r),b(s,i),b(s,u),b(u,d),b(t,m),f||(p=O(t,"click",g),f=!0)},p(a,s){e=a,68&s[0]&&!c(n.src,l="/img/role/"+e[6].resource+"/"+e[29]+".webp")&&S(n,"src",l),4&s[0]&&h!==(h=We[e[29]].name+"")&&C(r,h),4&s[0]&&v!==(v=We[e[29]].detail+"")&&C(d,v),4&s[0]&&z(t,"background-image","var(--"+e[29]+")")},d(e){e&&k(t),f=!1,p()}}}function Tt(e){let t,n,l,a,s,o,r,i,u,d,m=e[5],f=[];for(let t=0;t<m.length;t+=1)f[t]=Bt(qt(e,m,t));const p=e=>ie(f[e],1,1,(()=>{f[e]=null}));return{c(){t=j("div"),n=j("img"),s=M();for(let e=0;e<f.length;e+=1)f[e].c();o=M(),r=j("img"),c(n.src,l="/img/"+["spring","summer","autumn","winter"].rd()[0]+".webp")||S(n,"src",l),S(n,"class","svelte-oqxjfi"),c(r.src,i="/img/"+["spring","summer","autumn","winter"].rd()[0]+".webp")||S(r,"src",i),S(r,"class","svelte-oqxjfi"),S(t,"class","collection svelte-oqxjfi")},m(e,l){w(e,t,l),b(t,n),b(t,s);for(let e=0;e<f.length;e+=1)f[e]&&f[e].m(t,null);b(t,o),b(t,r),d=!0},p(e,n){if(536872243&n[0]){let l;for(m=e[5],l=0;l<m.length;l+=1){const a=qt(e,m,l);f[l]?(f[l].p(a,n),re(f[l],1)):(f[l]=Bt(a),f[l].c(),re(f[l],1),f[l].m(t,o))}for(se(),l=m.length;l<f.length;l+=1)p(l);oe()}},i(e){if(!d){a||Z((()=>{a=ue(n,$e,{duration:200}),a.start()}));for(let e=0;e<m.length;e+=1)re(f[e]);u||Z((()=>{u=ue(r,$e,{duration:200}),u.start()})),d=!0}},o(e){f=f.filter(Boolean);for(let e=0;e<f.length;e+=1)ie(f[e]);d=!1},d(e){e&&k(t),$(f,e)}}}function Bt(e){let t,n,l,s,o,r,i,c,u;function d(...t){return e[21](e[26],...t)}function m(...t){return e[23](e[26],...t)}return{c(){t=j("div"),n=j("div"),l=j("div"),s=j("icon"),S(s,"class",o="icon-"+e[26]+" svelte-oqxjfi"),S(l,"class","svelte-oqxjfi"),z(n,"background-color","var(--"+e[1]+")"),z(n,"filter","saturate("+(.5+Lt())+") hue-rotate("+("gold"==e[1]?20*Lt()-10:40*Lt()-20)+"deg)"),S(n,"class","svelte-oqxjfi"),S(t,"class","svelte-oqxjfi")},m(a,o){w(a,t,o),b(t,n),b(n,l),b(l,s),i=!0,c||(u=[O(n,"mouseenter",e[20]),O(n,"mousemove",d),O(n,"mouseleave",e[22]),O(n,"click",m)],c=!0)},p(t,l){e=t,(!i||32&l[0]&&o!==(o="icon-"+e[26]+" svelte-oqxjfi"))&&S(s,"class",o),(!i||2&l[0])&&z(n,"background-color","var(--"+e[1]+")"),(!i||2&l[0])&&z(n,"filter","saturate("+(.5+Lt())+") hue-rotate("+("gold"==e[1]?20*Lt()-10:40*Lt()-20)+"deg)")},i(e){i||(r&&r.end(1),i=!0)},o(e){r=de(n,$e,{duration:200}),i=!1},d(e){e&&k(t),e&&r&&r.end(),c=!1,a(u)}}}function Ft(e){let t,n,l,a,s,o=["collection","equipment","souvenir"].includes(e[0]),r="sugar"==e[0]&&St(e),i="chance"==e[0]&&zt(e),c="role"==e[0]&&At(e),u=o&&Tt(e);return{c(){t=j("div"),r&&r.c(),n=M(),i&&i.c(),l=M(),c&&c.c(),a=M(),u&&u.c(),S(t,"class","selections svelte-oqxjfi")},m(e,o){w(e,t,o),r&&r.m(t,null),b(t,n),i&&i.m(t,null),b(t,l),c&&c.m(t,null),b(t,a),u&&u.m(t,null),s=!0},p(e,s){"sugar"==e[0]?r?(r.p(e,s),1&s[0]&&re(r,1)):(r=St(e),r.c(),re(r,1),r.m(t,n)):r&&(se(),ie(r,1,1,(()=>{r=null})),oe()),"chance"==e[0]?i?(i.p(e,s),1&s[0]&&re(i,1)):(i=zt(e),i.c(),re(i,1),i.m(t,l)):i&&(se(),ie(i,1,1,(()=>{i=null})),oe()),"role"==e[0]?c?(c.p(e,s),1&s[0]&&re(c,1)):(c=At(e),c.c(),re(c,1),c.m(t,a)):c&&(se(),ie(c,1,1,(()=>{c=null})),oe()),1&s[0]&&(o=["collection","equipment","souvenir"].includes(e[0])),o?u?(u.p(e,s),1&s[0]&&re(u,1)):(u=Tt(e),u.c(),re(u,1),u.m(t,null)):u&&(se(),ie(u,1,1,(()=>{u=null})),oe())},i(e){s||(re(r),re(i),re(c),re(u),s=!0)},o(e){ie(r),ie(i),ie(c),ie(u),s=!1},d(e){e&&k(t),r&&r.d(),i&&i.d(),c&&c.d(),u&&u.d()}}}function Lt(){return Math.random()}function Nt(e,t,n){let l,a,s,o,r,i;u(e,Se,(e=>n(2,a=e))),u(e,Oe,(e=>n(25,s=e))),u(e,Ce,(e=>n(6,o=e)));const c={easy:{name:"轻松",detail:"有3次战败时回到战斗前的机会。机会消耗时，回复生命值并获得一件普通收藏品。",type:"blue",amount:3},normal:{name:"平实",detail:"有2次战败时回到战斗前的机会。机会消耗时，回复生命值并获得一件稀有收藏品。",type:"green",amount:2},hard:{name:"紧张",detail:"有1次战败时回到战斗前的机会。机会消耗时，回复生命值并获得一件传奇收藏品。",type:"red",amount:1}},d={equipment:Re,souvenir:De,collection:Ne,spellcard:Pe,chance:c,sugar:{},role:We};let f,{selected:p=!1}=t,h=e=>null,v=0,g=[0,1,2,3,4].map((e=>function(e){return`left:${50*e+20*Lt()+20}px;top:${70*Lt()}px;transform:rotate(${360*Lt()}deg);`}(e)));function y(e,t){f.hide(),n(0,r=null),n(11,p=!0),h(),"sugar"==e?m(Se,a.sugar=t,a):["role","chance"].includes(e)||["equipment","souvenir"].includes(e)?m(Se,a[e]=t,a):t in a[e]?m(Se,a[e][t]++,a):m(Se,a[e][t]=1,a)}R((e=>n(4,f=s)));return e.$$set=e=>{"selected"in e&&n(11,p=e.selected)},e.$$.update=()=>{7&e.$$.dirty[0]&&n(5,l=r?"collection"==r?Object.keys(Ne).filter((e=>Ne[e].type==i)).rd().splice(-a.sugar):Object.keys(d[r]).rd().splice(-a.sugar):[])},[r,i,a,v,f,l,o,c,d,g,y,p,(e,t,l)=>{e?(n(0,r=e),l&&(h=l),n(1,i="equipment"==r?"gold":"souvenir"==r?"purple":t)):(n(0,r=null),setTimeout((e=>n(11,p=!1)),300))},(e,t)=>n(3,v=e),(e,t)=>y("sugar",e+1),e=>f.show(e),(e,t)=>f.move(t,c[e],c[e].type),e=>f.hide(),(e,t)=>y(r,c[e]),(e,t)=>y("role",e),e=>f.show(e),(e,t)=>f.move(t,d[r][e],i),e=>f.hide(),(e,t)=>y(r,e)]}class Rt extends xe{constructor(e){super(),_e(this,e,Nt,Ft,o,{selector:12,selected:11},null,[-1,-1])}get selector(){return this.$$.ctx[12]}}var Dt={sort:{shrine:{normal:["cirno","lilywhite"],elite:[],boss:[]},forest:{normal:["sunny","lunar","star","eternity"]},moon:{normal:["piece"]}},cirno:{name:"冰之妖精",detail:"冷酷的智者",type:"normal"},piece:{name:"地狱的妖精",detail:"拥有使人发狂程度的能力",type:"normal"},lilywhite:{name:"报春的妖精",detail:"拥有告知春天到来程度的能力",type:"normal"},sunny:{name:"日光的妖精",detail:"拥有操纵光的折射程度的能力",type:"normal"},lunar:{name:"月光的妖精",detail:"拥有消除声音程度的能力",type:"normal"},star:{name:"星光的妖精",detail:"拥有感应到活动事物程度的能力",type:"normal"},eternity:{name:"凤蝶的妖精",detail:"拥有播撒鳞粉程度的能力",type:"normal"}};function Pt(e,t,n){const l=e.slice();return l[15]=t[n],l[17]=n,l}function Wt(e){let t,n,l,a=e[15].value+"";return{c(){t=j("txt"),n=q(a),S(t,"class",l=d(e[17]+e[2]==e[1]-1&&"reading")+" svelte-1bwxqnl"),z(t,"--length",e[15].value.getByteLen()/2-1),z(t,"width",e[15].value.getByteLen()-2+"ch"),z(t,"--time",(e[17]+e[2]==e[1]-1?.2*(e[15].value.getByteLen()/2-1):0)+"s")},m(e,l){w(e,t,l),b(t,n)},p(e,s){6&s&&a!==(a=e[15].value+"")&&C(n,a),6&s&&l!==(l=d(e[17]+e[2]==e[1]-1&&"reading")+" svelte-1bwxqnl")&&S(t,"class",l),6&s&&z(t,"--length",e[15].value.getByteLen()/2-1),6&s&&z(t,"width",e[15].value.getByteLen()-2+"ch"),6&s&&z(t,"--time",(e[17]+e[2]==e[1]-1?.2*(e[15].value.getByteLen()/2-1):0)+"s")},d(e){e&&k(t)}}}function Gt(e){let t,n,l,a,s,o,r,i,c,u,d,m,f,p,h,v,g,y,_,x=e[5].slice(e[2],e[1]),q=[];for(let t=0;t<x.length;t+=1)q[t]=Wt(Pt(e,x,t));function E(t){e[7](t)}function C(t){e[8](t)}let z={};return void 0!==e[4]&&(z.selector=e[4]),void 0!==e[0]&&(z.selected=e[0]),u=new Rt({props:z}),P.push((()=>he(u,"selector",E))),P.push((()=>he(u,"selected",C))),{c(){t=j("div"),n=j("div"),l=j("div"),a=j("div"),s=j("div"),s.innerHTML='<txt>Notepad</txt> \n          <div class="buttons svelte-1bwxqnl"><div href="#" class="minimize svelte-1bwxqnl"></div> \n            <div href="#" class="resize svelte-1bwxqnl"></div> \n            <div href="#" class="close svelte-1bwxqnl"></div></div>',o=M(),r=j("div"),i=j("div");for(let e=0;e<q.length;e+=1)q[e].c();c=M(),ve(u.$$.fragment),f=M(),p=j("div"),S(s,"class","title svelte-1bwxqnl"),S(i,"class","talk svelte-1bwxqnl"),S(r,"class","textarea svelte-1bwxqnl"),S(a,"class","window svelte-1bwxqnl"),S(l,"class","display svelte-1bwxqnl"),S(p,"class","bottom svelte-1bwxqnl"),S(n,"class","notebook svelte-1bwxqnl"),S(t,"class","body svelte-1bwxqnl")},m(d,m){w(d,t,m),b(t,n),b(n,l),b(l,a),b(a,s),b(a,o),b(a,r),b(r,i);for(let e=0;e<q.length;e+=1)q[e]&&q[e].m(i,null);b(r,c),ge(u,r,null),b(n,f),b(n,p),g=!0,y||(_=O(t,"click",e[9]),y=!0)},p(e,[t]){if(38&t){let n;for(x=e[5].slice(e[2],e[1]),n=0;n<x.length;n+=1){const l=Pt(e,x,n);q[n]?q[n].p(l,t):(q[n]=Wt(l),q[n].c(),q[n].m(i,null))}for(;n<q.length;n+=1)q[n].d(1);q.length=x.length}const n={};!d&&16&t&&(d=!0,n.selector=e[4],J((()=>d=!1))),!m&&1&t&&(m=!0,n.selected=e[0],J((()=>m=!1))),u.$set(n)},i(e){g||(re(u.$$.fragment,e),Z((()=>{g&&(v&&v.end(1),h=ue(t,ke,{duration:250}),h.start())})),g=!0)},o(e){ie(u.$$.fragment,e),h&&h.invalidate(),v=de(t,ke,{duration:250}),g=!1},d(e){e&&k(t),$(q,e),ye(u),e&&v&&v.end(),y=!1,_()}}}function Kt(e,t,n){let l,a,s;u(e,Se,(e=>n(10,l=e))),u(e,Me,(e=>n(11,a=e))),u(e,ze,(e=>n(12,s=e)));let o,r=!1,i=0,c=0,d=!0,f=[{type:"txt",value:"宇佐见莲子正对着笔记本电脑沉思。"},{type:"txt",value:"“终于要动笔了吗？”梅莉端着咖啡走来。"},{type:"txt",value:"“是啊。”莲子伸了个懒腰。"},{type:"txt",value:"“要加多少糖呢？”"},{type:"selector",value:"sugar"},{type:"txt",value:"“怎么还是空白的？”"},{type:"txt",value:"“因为还没决定好主基调。”莲子挠挠头。"},{type:"txt",value:"“时间多着呢，我会时不时偷窥并叫你重写的。”"},{type:"txt",value:"“也是，那就先试试吧。”"},{type:"selector",value:"chance"},{type:"txt",value:"“幻想交织在静谧的夜空之下——”莲子写道。"},{type:"txt",value:"“这句话有什么作用吗？”"},{type:"txt",value:"“文、文学的事情，你少管！”"},{type:"txt",value:"“少女坐在破旧的神社中。”她接着写，“其名为——”"},{type:"selector",value:"role"}];function p(){"txt"==f[i].type?n(1,i++,i):r?(n(3,d=!1),setTimeout((e=>{i==f.length-1?function(){const e={enermy:e=>s.enermy.push(Dt.sort[l.scene][e].rd()[0])};e.enermy("normal");let t=Ge.amount(s.lv);for(let n=0;n<t+10;n++)e.enermy("normal");m(Se,l.spellcards[l.role]=4,l),h(),h(),m(Me,a="Explore",a)}():(n(2,c=i+1),n(1,i+=1),o(),n(0,r=!1),n(3,d=!0),setTimeout((e=>p()),200))}),1e3)):o(f[i].value,"red")}function h(){let e=Object.keys(Pe).filter((e=>Pe[e].role==l.role)).rd()[0];l.spellcards[e]?m(Se,l.spellcards[e]++,l):m(Se,l.spellcards[e]=1,l)}p();return[r,i,c,d,o,f,p,function(e){o=e,n(4,o)},function(e){r=e,n(0,r)},e=>d&&p()]}class Xt extends xe{constructor(e){super(),_e(this,e,Kt,Gt,o,{})}}function Zt(e,t,n){const l=e.slice();return l[7]=t[n],l[9]=n,l}function Jt(e,t){let n,l,a,s,o,r,i,u,m,f,p,h,v,g,y,_,x=Dt[t[7]].name+"",$=Dt[t[7]].detail+"";function E(...e){return t[4](t[9],...e)}return{key:e,first:null,c(){n=j("div"),l=j("img"),s=M(),o=j("div"),r=j("txt"),i=j("span"),i.textContent=`lv.${t[2].lv}`,u=q(x),m=M(),f=j("txt"),p=q($),h=M(),v=j("div"),c(l.src,a=`/img/enermy/${Dt[t[7]].type}/${t[7]}/icon.webp`)||S(l,"src",a),S(l,"class","svelte-i08xtp"),S(i,"class","svelte-i08xtp"),S(r,"class","svelte-i08xtp"),S(f,"class","svelte-i08xtp"),S(o,"class","enermy-info svelte-i08xtp"),S(v,"class",d(`enermy-type enermy_${Dt[t[7]].type}`)+" svelte-i08xtp"),S(n,"class",g=d(`enermy ${t[0][t[9]]&&"enermy_selected"}`)+" svelte-i08xtp"),this.first=n},m(e,t){w(e,n,t),b(n,l),b(n,s),b(n,o),b(o,r),b(r,i),b(r,u),b(o,m),b(o,f),b(f,p),b(n,h),b(n,v),y||(_=O(n,"click",E),y=!0)},p(e,l){t=e,1&l&&g!==(g=d(`enermy ${t[0][t[9]]&&"enermy_selected"}`)+" svelte-i08xtp")&&S(n,"class",g)},d(e){e&&k(n),y=!1,_()}}}function Ut(e){let t,n,l,a,s,o,r,i,c,u,d,m,f,p=[],h=new Map,v=e[2].enermy;const g=e=>e[9];for(let t=0;t<v.length;t+=1){let n=Zt(e,v,t),l=g(n);h.set(l,p[t]=Jt(l,n))}return{c(){t=j("div"),n=j("div"),n.innerHTML="<txt>机遇</txt>",l=M(),a=j("div"),s=j("txt"),s.textContent=`敌人(${e[1]})`,o=M();for(let e=0;e<p.length;e+=1)p[e].c();r=M(),i=j("txt"),i.textContent="战斗",S(n,"class","explore-events svelte-i08xtp"),S(s,"class","title svelte-i08xtp"),S(i,"class","btn svelte-i08xtp"),S(a,"class","explore-enermys svelte-i08xtp"),S(t,"class","body explore svelte-i08xtp"),z(t,"background-image","url('/img/scene/shrine.webp')")},m(c,u){w(c,t,u),b(t,n),b(t,l),b(t,a),b(a,s),b(a,o);for(let e=0;e<p.length;e+=1)p[e]&&p[e].m(a,null);b(a,r),b(a,i),d=!0,m||(f=O(i,"click",e[3]),m=!0)},p(e,[t]){5&t&&(v=e[2].enermy,p=pe(p,t,g,1,e,v,h,a,me,Jt,r,Zt))},i(e){d||(Z((()=>{d&&(u&&u.end(1),c=ue(t,ke,{duration:250}),c.start())})),d=!0)},o(e){c&&c.invalidate(),u=de(t,ke,{duration:250}),d=!1},d(e){e&&k(t);for(let e=0;e<p.length;e+=1)p[e].d();e&&u&&u.end(),m=!1,f()}}}function Yt(e,t,n){let l,a;u(e,ze,(e=>n(5,l=e))),u(e,Me,(e=>n(6,a=e)));let s=l.enermy.length;const o=deepCopy(l);s>6&&o.enermy.splice(6);let r=o.enermy.map((e=>!1));return[r,s,o,function(){let e=r.reduce(((e,t)=>e+Number(t)),0);0==e?msg({content:"至少选择一个敌人"}):e>o.enermyLimit?msg({content:"你最多只能选择四个敌人"}):(m(Me,a="Battle",a),m(ze,l.target=r,l))},(e,t)=>n(0,r[e]=!r[e],r)]}class Qt extends xe{constructor(e){super(),_e(this,e,Yt,Ut,o,{})}}var Vt=(e,t,n,l,a)=>{n.collection("philosopher's_stone",(e=>t.equipmentLimit+=e))},en=(e,t,n,l,a)=>{n.collection("patchouli's_ribbon",(e=>{n.state.set("power",n.state.get().power+e),n.power.reset()})),n.collection("seal_needle",(e=>n.buff.add("seal_needle",8))),n.souvenir("ahab's_opinion",(e=>{let t=Math.floor(.7*n.state.get().health);n.state.set("health",t),n.state.set("Health",t)}))},tn=(e,t,n,l,a,s)=>{n.souvenir("wanderlust",(e=>t.limit=3)),n.collection("blade_of_yellow_spring",(t=>[...Array(t).keys()].forEach((t=>s.push(e.role)))))},nn=(e,t,n,l,a,s,o)=>{n.souvenir("wanderlust",(e=>t.limit=3)),n.collection("blade_of_yellow_spring",(e=>{t.ex=s.map(((e,t)=>t)).splice(-e),o.splice(-e)})),n.collection("blood_book",(e=>t.limit+=e))},ln=(e,t,n,l,a,s)=>{n.collection("blade_of_yellow_spring",(e=>s.splice(-e)))},an=(e,t,n,l,a)=>{n.buff.get("meditation_slash")&&t.card==e.role&&t.cost++,n.equipment("mirror_of_pear",(n=>t.cost=t.card==e.role?0:t.cost)),n.souvenir("mimicry_cat_pendant",(e=>{console.log(n.state.get().Health*(1-.1*t.cost)),n.state.set("Health",n.state.get().Health*(1-.1*t.cost)),t.cost=0}))},sn=(e,t,n,l,a,s)=>{"youmu"==e.role&&s.buff.push({value:"telepathism",amount:t.cost})};function on(e,t,n){const l=e.slice();return l[18]=t[n],l}function rn(e,t){let n,l,a,s,o,r,i,c,u,m,f,p,h,v,g=Pe[t[4][t[18]]].name+"",y=Pe[t[4][t[18]]].detail+"";function _(...e){return t[10](t[18],...e)}return{key:e,first:null,c(){n=j("div"),l=j("icon"),s=M(),o=j("txt"),r=q(g),i=M(),c=j("div"),u=j("txt"),m=q(y),f=M(),S(l,"class",a="icon-"+t[4][t[18]]+" svelte-1t9rmbp"),S(o,"class","name svelte-1t9rmbp"),S(c,"class","detail svelte-1t9rmbp"),S(n,"class",p=d(`spellcard ${t[2]==t[18]&&!t[3](t[18])&&"selectedSpellcard"} ${t[3](t[18])&&"animate_useSpellcard"} ${Pe[t[4][t[18]]].role}`)+" svelte-1t9rmbp"),this.first=n},m(e,t){w(e,n,t),b(n,l),b(n,s),b(n,o),b(o,r),b(n,i),b(n,c),b(c,u),b(u,m),b(n,f),h||(v=O(n,"click",_),h=!0)},p(e,s){t=e,2&s&&a!==(a="icon-"+t[4][t[18]]+" svelte-1t9rmbp")&&S(l,"class",a),2&s&&g!==(g=Pe[t[4][t[18]]].name+"")&&C(r,g),2&s&&y!==(y=Pe[t[4][t[18]]].detail+"")&&C(m,y),14&s&&p!==(p=d(`spellcard ${t[2]==t[18]&&!t[3](t[18])&&"selectedSpellcard"} ${t[3](t[18])&&"animate_useSpellcard"} ${Pe[t[4][t[18]]].role}`)+" svelte-1t9rmbp")&&S(n,"class",p)},d(e){e&&k(n),h=!1,v()}}}function cn(t){let n,l=[],a=new Map,s=t[1];const o=e=>e[18];for(let e=0;e<s.length;e+=1){let n=on(t,s,e),r=o(n);a.set(r,l[e]=rn(r,n))}return{c(){n=j("div");for(let e=0;e<l.length;e+=1)l[e].c();S(n,"class","spellcards svelte-1t9rmbp")},m(e,t){w(e,n,t);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(n,null)},p(e,[t]){31&t&&(s=e[1],l=pe(l,t,o,1,e,s,a,n,me,rn,null,on))},i:e,o:e,d(e){e&&k(n);for(let e=0;e<l.length;e+=1)l[e].d()}}}function un(e,t,n){let l,a,s;u(e,He,(e=>n(12,a=e))),u(e,Se,(e=>n(13,s=e)));const o=deepCopy(s);let r={limit:4};const i=[];for(let e in o.spellcards)for(let t=0;t<o.spellcards[e];t++)i.push(e);let{role:c}=t,{enermy:d}=t,{Selected:m}=t;const f=function(e){const t={limit:r.limit+e,ex:[]};nn(o,t,c,d,a,i,v),n(1,v=v.filter((e=>!g.includes(e)))),p=p.filter((e=>!v.includes(e))).rd(),n(1,v=[...v,...p.splice(0,t.limit-v.length),...t.ex]),p=0==p.length?y():p,n(9,g=[]),n(2,h=null)};let p,h,v=[],g=[];function y(){let e=i.map(((e,t)=>t));return ln(o,0,c,d,a,e),e}R((e=>{setTimeout((e=>{tn(o,r,c,d,a,i),p=y()}))}));return e.$$set=e=>{"role"in e&&n(5,c=e.role),"enermy"in e&&n(6,d=e.enermy),"Selected"in e&&n(0,m=e.Selected)},e.$$.update=()=>{512&e.$$.dirty&&n(3,l=e=>g.includes(e))},[m,v,h,l,i,c,d,e=>n(9,g=[...g,h]),f,g,(e,t)=>{n(2,h=h==e?null:e),n(0,m=i[h])}]}class dn extends xe{constructor(e){super(),_e(this,e,un,cn,o,{role:5,enermy:6,Selected:0,used:7,refresh:8})}get used(){return this.$$.ctx[7]}get refresh(){return this.$$.ctx[8]}}var mn={hypodynamic:{name:"乏力",detail:"回合开始时不回复灵力。生效时层数-1。",expend:!0},"Orrery's_Sun":{name:"太阳仪",detail:"直接攻击在次回合造成120%*1(每层+1)间接伤害。生效时层数-1。",positive:!0},tired:{name:"疲倦",detail:"回合开始时回复灵力减少1(每层+1)。生效时层数-1。",expend:!0},imprisoned:{name:"禁锢",detail:"回合内禁止行动。生效时层数-1。",expend:!0},prophesy:{name:"预言",detail:"闪避接下来的1(每层+1)次攻击。生效时层数-1。每回合初清空。",positive:!0,expend:!0,interim:!0},foresee:{name:"预知",detail:"闪避接下来的1(每层+1)次攻击。生效时层数-1。",positive:!0,expend:!0},interim_barrier:{name:"临时防御结界",detail:"阻挡1(每层+1)点伤害。生效时层数-1。每回合初清空。",positive:!0,interim:!0},barrier:{name:"防御结界",detail:"阻挡1(每层+1)点伤害。生效时层数-1。",positive:!0},frostbite:{name:"冻伤",detail:""},in_treatment:{name:"治疗中",detail:"回复5%(每层+5%)当前生命值。",positive:!0,interim:!0},burning:{name:"燃烧",detail:"每回合扣除2%(每层+2%)最大生命值。生效时层数-1。",expend:!0},strength_of_wine:{name:"酒劲",detail:"符卡造成的伤害+10%(每层+10%)。每回合初清空。",interim:!0,positive:!0},seal_needle:{name:"封魔针",detail:"造成8(每层-1)次伤害后，攻击对全体敌人附加流血。"},bleed:{name:"流血",detail:"每回合扣除2%(每层+2%)最大生命值。受治疗时移除。"},star:{name:"星星",detail:"天上的星星不装在瓶子里可是会爆炸的！",positive:!0},cursed_wind:{name:"诅咒之风",detail:"接下来的1(每层+1)次攻击会驱散目标身上所有正面效果。生效时层数-1。",positive:!0,expend:!0},tardy:{name:"迟缓",detail:"敏捷变为95%(每层*90%)。生效时层数-1。",expend:!0},Bright_Bitter_Wheel:{name:"幽明的苦轮",detail:"攻击附带60%间接伤害并回复1点灵力。生效时层数-1。",positive:!0,expend:!0},flow:{name:"流转",detail:"普通攻击伤害提高40%。生效时层数-1。",positive:!0,expend:!0},yanfan:{name:"燕返",detail:"普通攻击替换为「燕返: 对目标造成2*70%攻击力伤害」。生效时层数-1。",positive:!0,expend:!0},meditation_slash:{name:"冥想斩",detail:"普通攻击消耗的灵力+1，伤害提高200%。每回合初清空。",positive:!0,interim:!0},telepathism:{name:"通灵",detail:"10%(每层+10%)几率闪避下一次攻击。每回合初清空。",positive:!0,interim:!0}};const fn={cirno:{stage1:{mode:"random"}},piece:{stage1:{mode:"random"}},lilywhite:{stage1:{mode:"random"}},sunny:{stage1:{mode:"random"}},lunar:{stage1:{mode:"random"}},star:{stage1:{mode:"random"}},eternity:{stage1:{mode:"random"}}};var pn={sort:{cirno:["Perfect_Freeze","Icicle_Fall","Diamond_Blizzard","Minus_K","Frost_Columns"],lilywhite:["Surprise_Spring"]},cirno:{name:"冷气",detail:"对目标造成100%攻击力伤害。",output:{attack:[{type:"scale",value:"100",aim:"one"}]}},Perfect_Freeze:{name:"完美冻结",detail:"50%几率冻结对方一回合，50%几率冻结自己，若自己被冻结，受到的伤害减半。解冻后对目标造成300%攻击力伤害。"},Icicle_Fall:{name:"冰瀑",detail:"一回合无法行动，之后对目标造成600%攻击力伤害。"},Diamond_Blizzard:{name:"钻石风暴",detail:"对目标造成240%攻击力伤害并施加一层缓慢，对自己造成50%攻击力伤害。"},Minus_K:{name:"负K",detail:"接下来一回合，受到伤害会反馈一层冻伤。"},Frost_Columns:{name:"冰袭方阵",detail:"对目标造成200%攻击力伤害并施加两层疲倦。"},Surprise_Spring:{name:"惊喜之春",detail:"随机对目标造成80%到200%攻击力伤害",output:{attack:[{type:"random",typeofRandom:"scale",max:"80",min:"200",aim:"one"}]}}};const hn={};Object.assign(hn,Pe),Object.assign(hn,pn);const vn={spellcard:hn,buff:mn};var gn=(e,t,n)=>{const l={attack:[],buff:[],heal:[]};e.role&&(e.state=Ge.role[e.role](e.lv));const a=deepCopy(vn.spellcard[n].output);if(n==e.role&&o("yanfan",(e=>a.attack=[{type:"scale",value:"35",aim:"one",amount:"4"}])),"buff"in a)for(let n of a.buff)l.buff.push(n),"Orrery's_Sun"!=n.value||"Orrery's_Sun"in t||(t["Orrery's_Sun"]={state:e,attack:[]});if("attack"in a)for(let s of a.attack)if(s.amount=s.amount?s.amount:1,"Orrery's_Sun"in e.buff)t["Orrery's_Sun"].attack.push(n);else for(let e=0;e<s.amount;e++)l.attack.push(deepCopy(s));return"collection"in e&&(s("vampire's_old_tooth",(e=>0!=l.attack.length&&l.attack.forEach((t=>l.heal.push({type:"value",value:.5*e}))))),s("portable_money_box",(t=>l.attack.forEach((n=>n.value=n.value*(1+.05*t*Math.floor(e.coin/100)))))),s("skyrocket",(t=>n==e.role&&l.attack.forEach((e=>{yn()<.3&&(e.value=1.5*e.value,l.buff.push({value:"burning",amount:t,aim:"one"}))})))),s("pickled_radish",(t=>e.health/e.state.health>=.95&&n!=e.role&&l.attack.forEach((e=>e.value*=1+.1*t)))),s("bronze_mirror",(e=>l.attack.forEach((t=>yn()<.25&&l.attack.push({type:t.type,value:.3*t.value*e,aim:"random",critical:!1,indirect:!0}))))),s("earthy_spider_wine",(t=>{n==e.role&&(e.buff.strength_of_wine=t)})),s("amulet_of_full_moon",(t=>{Object.keys(e.buff).reduce(((e,t)=>e+(1==vn.buff[t].positive?0:1)),0)>2&&l.attack.forEach((e=>e.value*=1+.1*t))})),s("compass_cat",(t=>{e.speedGap<0&&l.attack.forEach((e=>e.value*=1+.1*t))})),o("strength_of_wine",(t=>n!=e.role&&l.attack.forEach((e=>e.value*=1+.1*t)))),o("seal_needle",(t=>{t<=0&&0!=l.attack.length&&(s("seal_needle",(e=>l.buff.push({value:"bleed",amount:e,aim:l.attack.map((e=>e.aim)).includes("all")?"all":"one"}))),e.buff.seal_needle+=9)})),o("Bright_Bitter_Wheel",(e=>{l.attack.forEach((e=>l.attack.push({type:e.type,value:.6*e.value,aim:"one",indirect:!0})))})),n==e.role&&o("flow",(e=>l.attack.forEach((e=>e.value=1.8*e.value)))),o("meditation_slash",(t=>n==e.role&&l.attack.forEach((e=>e.value=3*e.value))))),l.attack.forEach((t=>{t.from=e.role?"role":"enermy"})),l.buff.forEach((e=>e.amount=Number(e.amount))),l;function s(t,n){t in e.collection&&n(e.collection[t])}function o(t,n){if(t in e.buff){let l=e.buff[t];!vn.buff[t].positive&&s("fish_stone",(e=>l-=e)),n(l>=0?l:0),vn.buff[t].expend&&(1==e.buff[t]?delete e.buff[t]:e.buff[t]--)}}};function yn(){return Math.random()}function bn(t){let n,l,a,s,o,r,i,c,u,d,m,f;return{c(){n=j("div"),l=j("div"),a=M(),s=j("div"),o=M(),r=j("div"),i=M(),c=j("div"),u=M(),d=j("div"),m=M(),f=j("div"),S(l,"class","icon-star svelte-1whc4g4"),S(s,"class","icon-star svelte-1whc4g4"),S(r,"class","icon-star svelte-1whc4g4"),S(c,"class","icon-star svelte-1whc4g4"),S(d,"class","icon-star svelte-1whc4g4"),S(f,"class","icon-star svelte-1whc4g4"),S(n,"class","MarisaAttack svelte-1whc4g4"),z(n,"transform","rotate("+t[0]+"deg)"),z(n,"left",t[1]+"px"),z(n,"top",t[2]+"px")},m(e,t){w(e,n,t),b(n,l),b(n,a),b(n,s),b(n,o),b(n,r),b(n,i),b(n,c),b(n,u),b(n,d),b(n,m),b(n,f)},p:e,i:e,o:e,d(e){e&&k(n)}}}function _n(e){return[360*Math.random(),30+150*Math.random(),50+150*Math.random()]}function xn(t){let n,l,a,s,o,r,i,c,u,d;return{c(){n=j("div"),l=j("div"),a=j("div"),s=M(),o=j("div"),r=M(),i=j("div"),c=j("div"),u=M(),d=j("div"),S(a,"class","shadow svelte-bo2yxx"),z(a,"--rotate",t[2][0]+"deg"),z(a,"--height",t[3][0]+"px"),S(o,"class","shadow svelte-bo2yxx"),z(o,"--rotate",t[2][1]+"deg"),z(o,"--height",t[3][1]+"px"),z(l,"z-index","0"),S(l,"class","svelte-bo2yxx"),S(c,"class","slash svelte-bo2yxx"),z(c,"--rotate",t[2][0]+"deg"),z(c,"--height",t[3][0]+"px"),S(d,"class","slash svelte-bo2yxx"),z(d,"--rotate",t[2][1]+"deg"),z(d,"--height",t[3][1]+"px"),z(i,"z-index","4"),S(i,"class","svelte-bo2yxx"),S(n,"class","YoumuAttack svelte-bo2yxx"),z(n,"left",t[0]+"px"),z(n,"top",t[1]+"px"),z(n,"transform","rotate("+(30-60*wn())+")")},m(e,t){w(e,n,t),b(n,l),b(l,a),b(l,s),b(l,o),b(n,r),b(n,i),b(i,c),b(i,u),b(i,d)},p:e,i:e,o:e,d(e){e&&k(n)}}}function wn(){return Math.random()}function kn(e){return[40+120*wn(),80+120*wn(),[-20-50*wn(),20+50*wn()],[180+40*wn(),180+40*wn()]]}const $n={marisa:class extends xe{constructor(e){super(),_e(this,e,_n,bn,o,{})}},youmu:class extends xe{constructor(e){super(),_e(this,e,kn,xn,o,{})}}};function jn(e,t,n){const l=e.slice();return l[31]=t[n],l[33]=n,l}function qn(e,t,n){const l=e.slice();return l[34]=t[n],l[36]=n,l}function Mn(e){let t,n,l=Object.values(e[0][e[33]].buff)[e[36]]+"";return{c(){t=j("txt"),n=q(l),S(t,"class","svelte-1n991m8")},m(e,l){w(e,t,l),b(t,n)},p(e,t){1&t[0]&&l!==(l=Object.values(e[0][e[33]].buff)[e[36]]+"")&&C(n,l)},d(e){e&&k(t)}}}function En(e,t){let n,l,s,o,r,i,c,u=Object.values(t[0][t[33]].buff)[t[36]]>1,d=u&&Mn(t);function m(...e){return t[14](t[34],...e)}return{key:e,first:null,c(){n=j("div"),l=j("icon"),o=M(),d&&d.c(),r=M(),S(l,"class",s="icon-"+t[34]+" svelte-1n991m8"),S(n,"class","svelte-1n991m8"),this.first=n},m(e,a){w(e,n,a),b(n,l),b(n,o),d&&d.m(n,null),b(n,r),i||(c=[O(n,"mouseenter",t[13]),O(n,"mousemove",m),O(n,"mouseleave",t[15])],i=!0)},p(e,a){t=e,1&a[0]&&s!==(s="icon-"+t[34]+" svelte-1n991m8")&&S(l,"class",s),1&a[0]&&(u=Object.values(t[0][t[33]].buff)[t[36]]>1),u?d?d.p(t,a):(d=Mn(t),d.c(),d.m(n,r)):d&&(d.d(1),d=null)},d(e){e&&k(n),d&&d.d(),i=!1,a(c)}}}function On(e){let t,n,l;var a=$n[e[7].role];return a&&(t=H(a,{})),{c(){t&&ve(t.$$.fragment),n=E()},m(e,a){t&&ge(t,e,a),w(e,n,a),l=!0},p(e,l){if(a!==(a=$n[e[7].role])){if(t){se();const e=t;ie(e.$$.fragment,1,0,(()=>{ye(e,1)})),oe()}a?(t=H(a,{}),ve(t.$$.fragment),re(t.$$.fragment,1),ge(t,n.parentNode,n)):t=null}},i(e){l||(t&&re(t.$$.fragment,e),l=!0)},o(e){t&&ie(t.$$.fragment,e),l=!1},d(e){e&&k(n),t&&ye(t,e)}}}function Sn(e,t){let n,l,a,s,o,r,i,u,m,f,p,h,v,g,y,_,x,$,E,C,H,A=Dt[t[31]].name+"",I=[],T=new Map,B=Object.keys(t[0][t[33]].buff);const F=e=>e[36];for(let e=0;e<B.length;e+=1){let n=qn(t,B,e),l=F(n);T.set(l,I[e]=En(l,n))}let L=t[4]&&0!=t[4][t[33]].attack.length&&On(t);function N(...e){return t[16](t[33],...e)}return{key:e,first:null,c(){n=j("div"),l=j("div"),a=j("img"),r=M(),i=j("txt"),u=q(A),m=M(),f=j("div"),p=j("div"),h=M(),v=j("div");for(let e=0;e<I.length;e+=1)I[e].c();g=M(),y=j("div"),_=M(),L&&L.c(),x=M(),c(a.src,s=`/img/enermy/${Dt[t[31]].type}/${t[31]}/${t[4]&&0!=t[4][t[33]].attack.length||t[0][t[33]].Health<=0?"hurt":"portrait"}.webp`)||S(a,"src",s),S(a,"class",o=d(`${t[4]&&0!=t[4][t[33]].attack.length&&"animate_enermyShake"}`)+" svelte-1n991m8"),S(i,"class","svelte-1n991m8"),S(l,"class","enermy-info svelte-1n991m8"),S(p,"class","enermy-health svelte-1n991m8"),z(p,"visibility",t[0][t[33]].Health/t[0][t[33]].health!=1?"visible":"hidden"),z(p,"background-image",`linear-gradient(90deg, white ${t[0][t[33]].Health/t[0][t[33]].health*100}%, transparent ${t[0][t[33]].Health/t[0][t[33]].health*100}%)`),S(v,"class","enermy-buff svelte-1n991m8"),S(f,"class","enermy-state svelte-1n991m8"),S(y,"class","enermy-aim icon-aim svelte-1n991m8"),S(n,"class",$=d(`enermy ${!t[6]&&t[1]&&"oneAim"} ${t[0][t[33]].Health<=0&&"animate_enermyOut"} ${t[2]==t[33]&&"orderEnermy"}`)+" svelte-1n991m8"),z(n,"z-index",t[8].length-t[33]),this.first=n},m(e,t){w(e,n,t),b(n,l),b(l,a),b(l,r),b(l,i),b(i,u),b(n,m),b(n,f),b(f,p),b(f,h),b(f,v);for(let e=0;e<I.length;e+=1)I[e]&&I[e].m(v,null);b(n,g),b(n,y),b(n,_),L&&L.m(n,null),b(n,x),E=!0,C||(H=O(n,"click",N),C=!0)},p(e,l){t=e,(!E||17&l[0]&&!c(a.src,s=`/img/enermy/${Dt[t[31]].type}/${t[31]}/${t[4]&&0!=t[4][t[33]].attack.length||t[0][t[33]].Health<=0?"hurt":"portrait"}.webp`))&&S(a,"src",s),(!E||16&l[0]&&o!==(o=d(`${t[4]&&0!=t[4][t[33]].attack.length&&"animate_enermyShake"}`)+" svelte-1n991m8"))&&S(a,"class",o),(!E||1&l[0])&&z(p,"visibility",t[0][t[33]].Health/t[0][t[33]].health!=1?"visible":"hidden"),(!E||1&l[0])&&z(p,"background-image",`linear-gradient(90deg, white ${t[0][t[33]].Health/t[0][t[33]].health*100}%, transparent ${t[0][t[33]].Health/t[0][t[33]].health*100}%)`),289&l[0]&&(B=Object.keys(t[0][t[33]].buff),I=pe(I,l,F,1,t,B,T,v,me,En,null,qn)),t[4]&&0!=t[4][t[33]].attack.length?L?(L.p(t,l),16&l[0]&&re(L,1)):(L=On(t),L.c(),re(L,1),L.m(n,x)):L&&(se(),ie(L,1,1,(()=>{L=null})),oe()),(!E||71&l[0]&&$!==($=d(`enermy ${!t[6]&&t[1]&&"oneAim"} ${t[0][t[33]].Health<=0&&"animate_enermyOut"} ${t[2]==t[33]&&"orderEnermy"}`)+" svelte-1n991m8"))&&S(n,"class",$)},i(e){E||(re(L),E=!0)},o(e){ie(L),E=!1},d(e){e&&k(n);for(let e=0;e<I.length;e+=1)I[e].d();L&&L.d(),C=!1,H()}}}function Cn(e){let t,n,l,a=[],s=new Map,o=e[8];const r=e=>e[33];for(let t=0;t<o.length;t+=1){let n=jn(e,o,t),l=r(n);s.set(l,a[t]=Sn(l,n))}return{c(){t=j("div");for(let e=0;e<a.length;e+=1)a[e].c();S(t,"class",n="enermys "+(e[6]&&"allAim")+" svelte-1n991m8")},m(e,n){w(e,t,n);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(t,null);l=!0},p(e,i){511&i[0]&&(o=e[8],se(),a=pe(a,i,r,1,e,o,s,t,fe,Sn,null,jn),oe()),(!l||64&i[0]&&n!==(n="enermys "+(e[6]&&"allAim")+" svelte-1n991m8"))&&S(t,"class",n)},i(e){if(!l){for(let e=0;e<o.length;e+=1)re(a[e]);l=!0}},o(e){for(let e=0;e<a.length;e+=1)ie(a[e]);l=!1},d(e){e&&k(t);for(let e=0;e<a.length;e+=1)a[e].d()}}}function zn(e,t,n){let l,a,s,o,r;u(e,He,(e=>n(17,a=e))),u(e,Oe,(e=>n(18,s=e))),u(e,Se,(e=>n(19,o=e))),u(e,ze,(e=>n(20,r=e)));let{Selected:i}=t,{state:c}=t,{ordered:d}=t,{aimed:f}=t,{critical:p}=t,{killEvent:h}=t;const v={round:function(e,t){e({health:c[t].Health,state:c[t],buff:c[t].buff,input:e=>k(e,t),power:e=>null,index:t}),n(0,c)},output:function(){const e=c.map((e=>e.speed)),t=[];for(let n=0;n<e.length;n++){let n=e.indexOf(Math.max(...e));t.push(n),e[n]=0}return t.map((e=>function(e,t){let n=Math.floor(e/16)+1;return fn[t][n],"cirno"==t?["cirno","cirno","cirno"]:["Surprise_Spring","Surprise_Spring"]}(y.lv,_[e]).map((t=>({output:gn(c[e],(e=>m(He,a=e,a)),t),spellcard:t})))))},input:k,render:{list:[],add(){},handle(){}},state:e=>c,speedAdv:e=>{let t=v.state().filter((e=>e.Health>0));return v.state().filter((e=>e.Health>0)).reduce(((e,t)=>e+t.speed),0)/t.length},buff:{get:(e,t)=>{if(t){if(t in v.state()[e].buff){let l;return function(e,t,l){t in c[e].buff&&(l(c[e].buff[t]),mn[t].expend&&(1==c[e].buff[t]?delete c[e].buff[t]:n(0,c[e].buff[t]--,c)))}(e,t,(e=>l=e)),l}return!1}return v.state()[e].buff},clear:(e,t)=>{if(!0===t)for(let t in c[e].buff)mn[t].positive&&delete c[e].buff[t];else if(!1===t)for(let t in c[e].buff)!mn[t].positive&&delete c[e].buff[t];else n(0,c[e].buff={},c)}}};let{role:g}=t;const y=deepCopy(r),b=deepCopy(o),_=y.target.map(((e,t)=>e&&y.enermy[t])).filter((e=>e));c=_.map((e=>{let t=Ge.enermy[e](y.lv);return t.Health=t.health,t.buff={},t}));let x,w=null;function k(e,t){let l=_.map((e=>({attack:[],buff:[],heal:[]}))),s={heal:[],attack:[],buff:[]},o=[...Array(l.length).keys()],r={one:[t],all:o,else:o.filter((e=>e!=t)),average:o,random:o.filter((e=>c[e].Health>0)).rd().splice(0,1)},i=g.state.get();for(let t of e.attack){let n=Number(t.value);t.amount=t.amount?t.amount:1,"scale"==t.type&&(n*=.01*i.attack),t.type,"average"==t.aim&&(n/=o.filter((e=>c[e].Health>0)).length);let u=deepCopy(t),d=p(u.from),f="youmu"==b.role?0:d;u.critical="critical"in u?u.critical:Math.random()<f;let h=1.5;if("role"==u.from&&(j("human_soul_lamp",(e=>h+=.5*e)),"youmu"==b.role&&(h+=d)),"role"==u.from&&j("human_soul_lamp",(e=>h+=.5*e)),u.damage=n*(u.critical?h:1),"self"==t.aim)s.attack.push(u);else for(let n of r[t.aim]){let s=deepCopy(u);g.buff.get("cursed_wind")&&(v.buff.clear(n,!0),e.buff=e.buff.filter((e=>"self"==e.aim)),m(He,a.bottle_of_stars=a.bottle_of_stars.filter((e=>e.index!=n)),a)),"rate"==t.type&&(s.damage*=c[n].health),"Rate"==t.type&&(s.damage*=c[n].Health),l[n].attack.push(s)}}for(let t of e.heal)s.heal.push(t);for(let t of e.buff)if("self"==t.aim)s.buff.push({value:t.value,amount:t.amount});else for(let e of r[t.aim])l[e].buff.push(t);let u=function(e){const t={attack:[],buff:[],heal:[]},l=deepCopy(e);return l.forEach(((e,l)=>{for(let s of e.attack)s.indirect&&"role"==s.from&&j("sundial",(e=>s.damage*=1+.1*e)),q("sword_of_feixiang",(e=>{Object.keys(c[l].buff).reduce(((e,t)=>e+mn[t].positive?0:1),0)>0&&(s.damage*=1.4)})),c[l].Health>0&&c[l].Health-s.damage<=0&&h(l),s.damage>0&&"role"==s.from&&(g.buff.set("seal_needle",g.buff.get("seal_needle")-1),j("bottle_of_stars",(t=>{if(s.damage>=3*g.state.get().attack){e.buff.push({value:"star",amount:t}),a.bottle_of_stars||m(He,a.bottle_of_stars=[],a);for(let e=0;e<t;e++)a.bottle_of_stars.push({index:l,damage:.5*s.damage})}})),j("cursed_wind_chimes",(e=>{s.damage>=6*g.state.get().attack*Math.pow(.95,e-1)&&t.buff.push({value:"cursed_wind",amount:1})})),q("gongonier",(e=>{s.critical&&t.heal.push({type:"value",value:.2*s.damage})}))),n(0,c[l].Health-=s.damage,c);for(let t of e.heal)$(t+c[l].Health,l),delete c[l].buff.bleed;for(let t of e.buff)n(0,c[l].buff[t.value]=c[l].buff[t.value]?c[l].buff[t.value]+t.amount:t.amount,c)})),n(4,w=l),n(0,c),setTimeout((e=>n(4,w=null)),800),t}(l);for(let e in u)u[e].forEach((t=>s[e].push(t)));return s}function $(e,t){n(0,c[t].Health=e>c[t].health?c[t].health:e,c)}function j(e,t){e in b.collection&&t(b.collection[e])}function q(e,t){b.equipment==e&&t()}R((e=>n(5,x=s)));return e.$$set=e=>{"Selected"in e&&n(1,i=e.Selected),"state"in e&&n(0,c=e.state),"ordered"in e&&n(2,d=e.ordered),"aimed"in e&&n(3,f=e.aimed),"critical"in e&&n(9,p=e.critical),"killEvent"in e&&n(10,h=e.killEvent),"role"in e&&n(12,g=e.role)},e.$$.update=()=>{2&e.$$.dirty[0]&&n(6,l=null!=i&&"allAim"in Pe[i])},[c,i,d,f,w,x,l,b,_,p,h,v,g,e=>x.show(e),(e,t)=>x.move(t,mn[e],mn[e].positive?"blue":"purple"),e=>x.hide(),(e,t)=>{c[e].Health>0&&i&&f(e)}]}class Hn extends xe{constructor(e){super(),_e(this,e,zn,Cn,o,{Selected:1,state:0,ordered:2,aimed:3,critical:9,killEvent:10,enermy:11,role:12},null,[-1,-1])}get enermy(){return this.$$.ctx[11]}}function An(e,t,n){const l=e.slice();return l[36]=t[n],l[38]=n,l}function In(e,t,n){const l=e.slice();return l[39]=t[n],l[38]=n,l}function Tn(e,t,n){const l=e.slice();return l[41]=t[n],l[38]=n,l}function Bn(e){let t,n,l,s,o,r,i,c=Object.values(e[0])[e[38]]>1,u=c&&Fn(e);function d(...t){return e[19](e[41],...t)}return{c(){t=j("div"),n=j("icon"),s=M(),u&&u.c(),o=M(),S(n,"class",l="icon-"+e[41]+" svelte-jpjzjf"),S(t,"class","svelte-jpjzjf")},m(l,a){w(l,t,a),b(t,n),b(t,s),u&&u.m(t,null),b(t,o),r||(i=[O(t,"mouseenter",e[18]),O(t,"mousemove",d),O(t,"mouseleave",e[20])],r=!0)},p(a,s){e=a,1&s[0]&&l!==(l="icon-"+e[41]+" svelte-jpjzjf")&&S(n,"class",l),1&s[0]&&(c=Object.values(e[0])[e[38]]>1),c?u?u.p(e,s):(u=Fn(e),u.c(),u.m(t,o)):u&&(u.d(1),u=null)},d(e){e&&k(t),u&&u.d(),r=!1,a(i)}}}function Fn(e){let t,n,l=Object.values(e[0])[e[38]]+"";return{c(){t=j("txt"),n=q(l),S(t,"class","svelte-jpjzjf")},m(e,l){w(e,t,l),b(t,n)},p(e,t){1&t[0]&&l!==(l=Object.values(e[0])[e[38]]+"")&&C(n,l)},d(e){e&&k(t)}}}function Ln(e,t){let n,l,a=Object.values(t[0])[t[38]]>0,s=a&&Bn(t);return{key:e,first:null,c(){n=E(),s&&s.c(),l=E(),this.first=n},m(e,t){w(e,n,t),s&&s.m(e,t),w(e,l,t)},p(e,n){t=e,1&n[0]&&(a=Object.values(t[0])[t[38]]>0),a?s?s.p(t,n):(s=Bn(t),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null)},d(e){e&&k(n),s&&s.d(e),e&&k(l)}}}function Nn(e){let t,n=[],l=new Map,a=e[5].attack;const s=e=>e[38];for(let t=0;t<a.length;t+=1){let o=In(e,a,t),r=s(o);l.set(r,n[t]=Rn(r,o))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=E()},m(e,l){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,l);w(e,t,l)},p(e,o){32&o[0]&&(a=e[5].attack,n=pe(n,o,s,1,e,a,l,t.parentNode,me,Rn,t,In))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&k(t)}}}function Rn(e,t){let n,l,a,s=t[39].damage.toFixed(1)+"";return{key:e,first:null,c(){n=j("txt"),l=q(s),S(n,"class",a="battle-input "+(t[39].critical&&"critical")+" svelte-jpjzjf"),z(n,"left",90+150*Gn()+"px"),z(n,"top",60*Gn()-40+"px"),this.first=n},m(e,t){w(e,n,t),b(n,l)},p(e,o){t=e,32&o[0]&&s!==(s=t[39].damage.toFixed(1)+"")&&C(l,s),32&o[0]&&a!==(a="battle-input "+(t[39].critical&&"critical")+" svelte-jpjzjf")&&S(n,"class",a)},d(e){e&&k(n)}}}function Dn(e){let t,n=[],l=new Map,a=e[5].heal;const s=e=>e[38];for(let t=0;t<a.length;t+=1){let o=An(e,a,t),r=s(o);l.set(r,n[t]=Pn(r,o))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=E()},m(e,l){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,l);w(e,t,l)},p(e,o){32&o[0]&&(a=e[5].heal,n=pe(n,o,s,1,e,a,l,t.parentNode,me,Pn,t,An))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&k(t)}}}function Pn(e,t){let n,l,a=t[36].toFixed(1)+"";return{key:e,first:null,c(){n=j("txt"),l=q(a),S(n,"class","battle-heal"),z(n,"left",90+150*Gn()+"px"),z(n,"top",60*Gn()-40+"px"),this.first=n},m(e,t){w(e,n,t),b(n,l)},p(e,n){t=e,32&n[0]&&a!==(a=t[36].toFixed(1)+"")&&C(l,a)},d(e){e&&k(n)}}}function Wn(t){let n,l,s,o,r,i,u,d,m,f,p,h,v,g,y,_,x,$,E,H,A,I,T,B,F,L,N=[],R=new Map,D=t[2].toFixed(0)+"",P=t[1].health+"",W=Object.keys(t[0]);const G=e=>e[38];for(let e=0;e<W.length;e+=1){let n=Tn(t,W,e),l=G(n);R.set(l,N[e]=Ln(l,n))}let K=t[5]&&"attack"in t[5]&&0!=t[5].attack.length&&Nn(t),X=t[5]&&"heal"in t[5]&&0!=t[5].heal.length&&Dn(t);return{c(){n=j("div"),l=j("div"),s=j("div"),o=M(),r=j("img"),u=M(),d=j("div"),m=j("txt"),f=q(t[4]),p=M(),h=j("div");for(let e=0;e<N.length;e+=1)N[e].c();v=M(),g=j("div"),y=j("txt"),_=q(D),x=q(" / "),$=q(P),E=M(),H=j("div"),A=M(),I=j("div"),I.textContent=`${We[t[8].role].name}`,T=M(),K&&K.c(),B=M(),X&&X.c(),z(s,"height",100*(1-t[3]/t[1].power)+"%"),S(s,"class","svelte-jpjzjf"),c(r.src,i=`/img/role/${t[7].resource}/${t[8].role}.webp`)||S(r,"src",i),S(r,"class","svelte-jpjzjf"),S(l,"class","power svelte-jpjzjf"),S(m,"class","svelte-jpjzjf"),S(d,"class","exPower svelte-jpjzjf"),z(d,"visibility",t[4]>0?"visible":"hidden"),S(h,"class","buff svelte-jpjzjf"),S(y,"class","health-value svelte-jpjzjf"),z(H,"left",t[2]/t[1].health*100-100+"%"),S(H,"class","svelte-jpjzjf"),S(g,"class","health svelte-jpjzjf"),S(I,"class","state-role svelte-jpjzjf"),S(n,"class","state svelte-jpjzjf")},m(e,a){w(e,n,a),b(n,l),b(l,s),b(l,o),b(l,r),b(n,u),b(n,d),b(d,m),b(m,f),b(n,p),b(n,h);for(let e=0;e<N.length;e+=1)N[e]&&N[e].m(h,null);b(n,v),b(n,g),b(g,y),b(y,_),b(y,x),b(y,$),b(g,E),b(g,H),b(n,A),b(n,I),b(n,T),K&&K.m(n,null),b(n,B),X&&X.m(n,null),F||(L=[O(d,"mouseenter",t[15]),O(d,"mousemove",t[16]),O(d,"mouseleave",t[17])],F=!0)},p(e,t){10&t[0]&&z(s,"height",100*(1-e[3]/e[1].power)+"%"),128&t[0]&&!c(r.src,i=`/img/role/${e[7].resource}/${e[8].role}.webp`)&&S(r,"src",i),16&t[0]&&C(f,e[4]),16&t[0]&&z(d,"visibility",e[4]>0?"visible":"hidden"),65&t[0]&&(W=Object.keys(e[0]),N=pe(N,t,G,1,e,W,R,h,me,Ln,null,Tn)),4&t[0]&&D!==(D=e[2].toFixed(0)+"")&&C(_,D),2&t[0]&&P!==(P=e[1].health+"")&&C($,P),6&t[0]&&z(H,"left",e[2]/e[1].health*100-100+"%"),e[5]&&"attack"in e[5]&&0!=e[5].attack.length?K?K.p(e,t):(K=Nn(e),K.c(),K.m(n,B)):K&&(K.d(1),K=null),e[5]&&"heal"in e[5]&&0!=e[5].heal.length?X?X.p(e,t):(X=Dn(e),X.c(),X.m(n,null)):X&&(X.d(1),X=null)},i:e,o:e,d(e){e&&k(n);for(let e=0;e<N.length;e+=1)N[e].d();K&&K.d(),X&&X.d(),F=!1,a(L)}}}function Gn(){return Math.random()}function Kn(e,t,n){let l,a,s,o;u(e,He,(e=>n(21,l=e))),u(e,Oe,(e=>n(22,a=e))),u(e,Se,(e=>n(23,s=e))),u(e,Ce,(e=>n(7,o=e)));const r=deepCopy(s);let i,c,d={},m=Ge.role[r.role](r.lv),f=r.health,p=m.power,h="marisa"==r.role?4:0;R((e=>n(6,c=a)));const v={cost:e=>{let t=p+h-e;return n(4,h=t<=p?0:h-e),t<=p&&n(3,p=t),t},reset:e=>n(3,p=m.power),add:e=>n(4,h+=e),get:e=>p+h},g={get:e=>{if(e){if(e in d){let t;return E(e,(e=>t=e)),t}return!1}return d},set:(e,t)=>{if(!(e in d))return!1;n(0,d[e]=t,d)},clear:e=>{if(!0===e)for(let e in d)mn[e].positive&&delete d[e];else if(!1===e)for(let e in d)!mn[e].positive&&delete d[e];else n(0,d={})},link:E,add:(e,t)=>n(0,d[e]=t,d)},y={get:e=>{let t=deepCopy(m);return t.Health=f,O("corvis_feathers",(e=>{Object.keys(d).reduce(((e,t)=>e+mn[t].positive?1:0),0)>=2&&(t.speed+=.05*e)})),E("tardy",(e=>t.speed*=Math.pow(.95,e))),t},set:(e,t)=>{"Health"==e?M(t):n(1,m[e]=t,m)}};let{critical:b}=t;const _={round:function(e){e({health:f,state:m,buff:d,input:q,power:v.reset}),n(0,d)},input:q,output:j,state:y,buff:g,power:v,collection:O,equipment:function(e,t){r.equipment==e&&t()},souvenir:S};let{enermy:x}=t,{killEvent:w}=t,{deadEvent:k}=t,{Cost:$}=t;function j(e,t){"Bright_Bitter_Wheel"in d&&n(4,h++,h);const a=deepCopy(r);return a.state=m,a.buff=d,a.health=f,a.speedGap=_.state.get().speed-x.speedAdv(),gn(t||a,l,e)}function q(e,t){let l=x.state()[t],a={attack:[],buff:[],heal:[]},s={heal:[],attack:[],buff:[]};for(let t of e.attack){let e=Number(t.value);t.amount=t.amount?t.amount:1,"scale"==t.type&&(e*=.01*l.attack),t.type,t.aim;let n=deepCopy(t);n.critical="critical"in n?n.critical:Gn()<b(n.from);let o=1.5;"role"==n.from&&O("human_soul_lamp",(e=>o+=.5*e)),n.damage=e*(n.critical?o:1),"self"==t.aim?s.attack.push(n):("rate"==t.type&&(n.damage*=m.health),"Rate"==t.type&&(n.damage*=f),a.attack.push(n))}for(let t of e.heal)"value"==t.type&&a.heal.push(t.value),"rate"==t.type&&a.heal.push(t.value*m.health),"Rate"==t.type&&a.heal.push(t.value*f);for(let t of e.buff)"self"==t.aim?s.buff.push({value:t.value,amount:t.amount}):a.buff.push(t);let o=function(e){const t={attack:[],buff:[],heal:[]},l=deepCopy(e);for(let e of l.attack)O("mimosa",(t=>{let n=3*m.attack*Math.pow(.95,t-1);e.damage>n&&(e.damage=n)})),S("nodas_hat",(t=>{e.damage*=f/m.health>.5?1.2:.7})),O("conch_shell",(t=>e.damage-=t)),E("prophesy",(t=>e.damage=0)),E("foresee",(t=>e.damage=0)),E("telepathism",(a=>{if(e.damage>0&&Gn()<a/10){let s=$("youmu");if(s<_.power.get()){_.power.cost(s),e.damage=0,a>3?n(0,d.telepathism-=3,d):delete d.telepathism;let o=j("youmu");o.attack.forEach((e=>e.critical=!0));for(let e in o)o[e].forEach((n=>t[e].push(n)));l.buff.push({value:"telepathism",amount:s})}else msg({content:"灵力不足"})}})),e.damage<0&&(e.damage=0),E("barrier",(t=>{t>e.damage?(n(0,d.barrier-=Math.ceil(e.damage),d),e.damage=0):(e.damage-=t,delete d.barrier)})),E("interim_barrier",(t=>{t>e.damage?(n(0,d.interim_barrier-=Math.ceil(e.damage),d),e.damage=0):(e.damage-=t,delete d.interim_barrier)})),S("microlithic_fish",(t=>{Gn()<.7&&e.damage>0?l.buff.push({value:["burning","bleed","tired","tardy"].rd()[0],amount:1}):e.damage=0})),n(2,f-=e.damage),O("magic_dart",(n=>{e.damage>0&&t.attack.push({value:(.2+.1*(n-1))*e.damage,type:"real",aim:"one",indirect:!0,from:"role"})})),O("large_roll_of_bandages",(t=>{e.damage>0&&n(0,d.in_treatment=t,d)})),O("red_and_white_scarf",(t=>{f/r.health>.3*Math.pow(.9,t-1)&&f-e.damage<=0&&(e.damage=f-1)})),O("fox_jade",(t=>{e.damage/m.health>=.4*Math.pow(.95,t-1)&&w()})),f<=0&&k();for(let e of l.heal)M(e+f),e+f>m.health&&O("cherry",(t=>l.buff.push({value:"interim_barrier",amount:Math.ceil(.2*(e+f-m.health)*t)}))),delete d.bleed;for(let e of l.buff)n(0,d[e.value]=d[e.value]?d[e.value]+e.amount:e.amount,d);return n(5,i=l),setTimeout((e=>n(5,i=null)),800),t}(a);for(let e in o)o[e].forEach((t=>s[e].push(t)));return s}function M(e){n(2,f=e>m.health?m.health:e)}function E(e,t){if(e in d){let l=d[e];!mn[e].positive&&O("fish_stone",(e=>l-=e)),t(l>=0?l:0),mn[e].expend&&(1==d[e]?delete d[e]:n(0,d[e]--,d)),n(0,d)}}function O(e,t){e in r.collection&&t(r.collection[e])}function S(e,t){return r.souvenir==e&&t(),r.souvenir==e}en(r,null,_,x,l,m);return e.$$set=e=>{"critical"in e&&n(9,b=e.critical),"enermy"in e&&n(11,x=e.enermy),"killEvent"in e&&n(12,w=e.killEvent),"deadEvent"in e&&n(13,k=e.deadEvent),"Cost"in e&&n(14,$=e.Cost)},[d,m,f,p,h,i,c,o,r,b,_,x,w,k,$,e=>c.show(e),e=>c.move(e,{name:"额外灵力",detail:"等同于灵力，优先消耗。\n上限等同于牌库总牌数。"},"blue"),e=>c.hide(),e=>c.show(e),(e,t)=>c.move(t,mn[e],mn[e].positive?"blue":"purple"),e=>c.hide()]}class Xn extends xe{constructor(e){super(),_e(this,e,Kn,Wn,o,{critical:9,role:10,enermy:11,killEvent:12,deadEvent:13,Cost:14},null,[-1,-1])}get role(){return this.$$.ctx[10]}}function Zn(e,t,n){const l=e.slice();return l[6]=t[n],l[8]=n,l}function Jn(e,t){let n,l,a,s,o,r,i,u,m,f,p,h,v,g,y,_,x=pn[t[6].spellcard].detail+"",$=pn[t[6].spellcard].name+"",E=t[8]+1+"";return{key:e,first:null,c(){n=j("div"),l=j("div"),a=j("txt"),s=q(x),o=M(),r=j("txt"),i=q($),u=M(),m=j("img"),p=M(),h=j("txt"),v=q(E),g=M(),S(a,"class","title svelte-stpdnh"),S(r,"class","detail svelte-stpdnh"),S(l,"class","svelte-stpdnh"),c(m.src,f=`/img/enermy/${Dt[t[2][t[6].enermy]].type}/${t[2][t[6].enermy]}/icon.webp`)||S(m,"src",f),S(m,"class","svelte-stpdnh"),S(h,"class","svelte-stpdnh"),S(n,"class",y=d(t[2][t[6].enermy])+" svelte-stpdnh"),S(n,"style",_=t[1]&&`animation-delay:${.5/(t[0].length-1)*(t[0].length-1-t[8])}s`),this.first=n},m(e,t){w(e,n,t),b(n,l),b(l,a),b(a,s),b(l,o),b(l,r),b(r,i),b(n,u),b(n,m),b(n,p),b(n,h),b(h,v),b(n,g)},p(e,l){t=e,1&l&&x!==(x=pn[t[6].spellcard].detail+"")&&C(s,x),1&l&&$!==($=pn[t[6].spellcard].name+"")&&C(i,$),1&l&&!c(m.src,f=`/img/enermy/${Dt[t[2][t[6].enermy]].type}/${t[2][t[6].enermy]}/icon.webp`)&&S(m,"src",f),1&l&&E!==(E=t[8]+1+"")&&C(v,E),1&l&&y!==(y=d(t[2][t[6].enermy])+" svelte-stpdnh")&&S(n,"class",y),3&l&&_!==(_=t[1]&&`animation-delay:${.5/(t[0].length-1)*(t[0].length-1-t[8])}s`)&&S(n,"style",_)},d(e){e&&k(n)}}}function Un(t){let n,l,a=[],s=new Map,o=t[0];const r=e=>e[8];for(let e=0;e<o.length;e+=1){let n=Zn(t,o,e),l=r(n);s.set(l,a[e]=Jn(l,n))}return{c(){n=j("div");for(let e=0;e<a.length;e+=1)a[e].c();S(n,"class",l="record "+(t[1]&&"clear")+" svelte-stpdnh")},m(e,t){w(e,n,t);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(n,null)},p(e,[t]){7&t&&(o=e[0],a=pe(a,t,r,1,e,o,s,n,me,Jn,null,Zn)),2&t&&l!==(l="record "+(e[1]&&"clear")+" svelte-stpdnh")&&S(n,"class",l)},i:e,o:e,d(e){e&&k(n);for(let e=0;e<a.length;e+=1)a[e].d()}}}function Yn(e,t,n){let l;u(e,ze,(e=>n(4,l=e)));let a=[],s=!1;const o={add:e=>n(0,a=[...a,e]),clear:e=>{n(1,s=!0),setTimeout((e=>{n(0,a=[]),n(1,s=!1)}),500)}},r=deepCopy(l),i=r.target.map(((e,t)=>e&&r.enermy[t])).filter((e=>e));return[a,s,i,o]}class Qn extends xe{constructor(e){super(),_e(this,e,Yn,Un,o,{record:3})}get record(){return this.$$.ctx[3]}}function Vn(e){let t,n;return{c(){t=j("img"),c(t.src,n="/img/role/"+e[13].resource+"/"+e[8]+"/"+e[14].role+".webp")||S(t,"src",n),S(t,"class","svelte-12l7lar")},m(e,n){w(e,t,n)},p(e,l){8448&l[0]&&!c(t.src,n="/img/role/"+e[13].resource+"/"+e[8]+"/"+e[14].role+".webp")&&S(t,"src",n)},d(e){e&&k(t)}}}function el(t){let n,l,a;return{c(){n=j("txt"),n.textContent="回到标题界面",S(n,"class","skip svelte-12l7lar")},m(e,s){w(e,n,s),l||(a=O(n,"click",t[32]),l=!0)},p:e,i:e,o:e,d(e){e&&k(n),l=!1,a()}}}function tl(e){let t,n,l,a,s,o,r,i,c,u,d,m,f=("blue"==e[10]?100:"green"==e[10]?300:1500)+"";function p(t){e[30](t)}let h={};return void 0!==e[9]&&(h.selector=e[9]),t=new Rt({props:h}),P.push((()=>he(t,"selector",p))),{c(){ve(t.$$.fragment),l=M(),a=j("div"),s=j("txt"),o=q("跳过并获得"),r=q(f),i=M(),c=j("icon"),S(c,"class","icon-coin svelte-12l7lar"),S(a,"class","skip svelte-12l7lar")},m(n,f){ge(t,n,f),w(n,l,f),w(n,a,f),b(a,s),b(s,o),b(s,r),b(a,i),b(a,c),u=!0,d||(m=O(a,"click",e[31]),d=!0)},p(e,l){const a={};!n&&512&l[0]&&(n=!0,a.selector=e[9],J((()=>n=!1))),t.$set(a),(!u||1024&l[0])&&f!==(f=("blue"==e[10]?100:"green"==e[10]?300:1500)+"")&&C(r,f)},i(e){u||(re(t.$$.fragment,e),u=!0)},o(e){ie(t.$$.fragment,e),u=!1},d(e){ye(t,e),e&&k(l),e&&k(a),d=!1,m()}}}function nl(e){let t,n,l,s,o,r,i,c,u,m,f,p,h,v,g,y,_,x,$,E,H,A,I,T,B,F,L,N,R,D,W,G,K,X,U,Y,Q,V,ee,te,ne,le,ae,ce,me,fe,pe="win"==e[8]?"胜利":"满身疮痍";function be(t){e[22](t)}let _e={Selected:e[1],aimed:e[15],ordered:e[3],critical:e[20],killEvent:e[18],role:e[5]};function xe(t){e[23](t)}void 0!==e[6]&&(_e.enermy=e[6]),l=new Hn({props:_e}),P.push((()=>he(l,"enermy",be)));let we={};function $e(t){e[24](t)}function je(t){e[25](t)}function qe(t){e[26](t)}void 0!==e[7]&&(we.record=e[7]),r=new Qn({props:we}),P.push((()=>he(r,"record",xe)));let Me={role:e[5],enermy:e[6]};function Ee(t){e[27](t)}void 0!==e[0]&&(Me.used=e[0]),void 0!==e[1]&&(Me.Selected=e[1]),void 0!==e[2]&&(Me.refresh=e[2]),u=new dn({props:Me}),P.push((()=>he(u,"used",$e))),P.push((()=>he(u,"Selected",je))),P.push((()=>he(u,"refresh",qe)));let Oe={critical:e[20],killEvent:e[18],deadEvent:e[19],enermy:e[6],Cost:e[16]};void 0!==e[5]&&(Oe.role=e[5]),v=new Xn({props:Oe}),P.push((()=>he(v,"role",Ee)));let Se=e[8]&&Vn(e);const Ce=[tl,el],ze=[];function He(e,t){return e[10]?0:1}return V=He(e),ee=ze[V]=Ce[V](e),{c(){t=j("div"),n=j("div"),ve(l.$$.fragment),o=M(),ve(r.$$.fragment),c=M(),ve(u.$$.fragment),h=M(),ve(v.$$.fragment),y=M(),_=j("div"),x=j("div"),x.innerHTML='<icon class="icon-consumables svelte-12l7lar"></icon> \n        <txt class="svelte-12l7lar">消耗品</txt>',$=M(),E=j("div"),E.innerHTML='<icon class="icon-back svelte-12l7lar"></icon> \n        <txt class="svelte-12l7lar">回溯</txt>',H=M(),A=j("div"),I=j("icon"),T=M(),B=j("txt"),B.textContent=`${e[14].equipment?Re[e[14].equipment].name:"空"}`,F=M(),L=j("div"),N=j("txt"),N.textContent="结束回合",W=M(),G=j("div"),Se&&Se.c(),K=M(),X=j("div"),U=j("txt"),Y=q(pe),Q=M(),ee.c(),S(x,"class","consumables svelte-12l7lar"),S(E,"class","back svelte-12l7lar"),S(I,"class","icon-"+(e[14].equipment?e[14].equipment:"empty")+" svelte-12l7lar"),S(B,"class","svelte-12l7lar"),S(A,"class","equipment svelte-12l7lar"),S(N,"class","svelte-12l7lar"),S(L,"class",R=d(`end ${!e[4]&&"outRound"}`)+" svelte-12l7lar"),S(_,"class","action svelte-12l7lar"),S(n,"class",D="battle "+e[8]+" svelte-12l7lar"),S(U,"class","title svelte-12l7lar"),S(X,"class","svelte-12l7lar"),S(G,"class","barrier body svelte-12l7lar"),S(G,"style",te="z-index:"+(e[8]?5:-1)+";"+(e[8]&&"visibility:visible")),S(t,"class",ne="body "+e[1]+" "+e[8]+" svelte-12l7lar"),z(t,"background-image","url('/img/scene/"+e[14].scene+".webp')")},m(a,s){w(a,t,s),b(t,n),ge(l,n,null),b(n,o),ge(r,n,null),b(n,c),ge(u,n,null),b(n,h),ge(v,n,null),b(n,y),b(n,_),b(_,x),b(_,$),b(_,E),b(_,H),b(_,A),b(A,I),b(A,T),b(A,B),b(_,F),b(_,L),b(L,N),b(t,W),b(t,G),Se&&Se.m(G,null),b(G,K),b(G,X),b(X,U),b(U,Y),b(X,Q),ze[V].m(X,null),ce=!0,me||(fe=[O(E,"click",ll),O(A,"click",e[28]),O(L,"click",e[29])],me=!0)},p(e,a){const o={};2&a[0]&&(o.Selected=e[1]),8&a[0]&&(o.ordered=e[3]),32&a[0]&&(o.role=e[5]),!s&&64&a[0]&&(s=!0,o.enermy=e[6],J((()=>s=!1))),l.$set(o);const c={};!i&&128&a[0]&&(i=!0,c.record=e[7],J((()=>i=!1))),r.$set(c);const h={};32&a[0]&&(h.role=e[5]),64&a[0]&&(h.enermy=e[6]),!m&&1&a[0]&&(m=!0,h.used=e[0],J((()=>m=!1))),!f&&2&a[0]&&(f=!0,h.Selected=e[1],J((()=>f=!1))),!p&&4&a[0]&&(p=!0,h.refresh=e[2],J((()=>p=!1))),u.$set(h);const y={};64&a[0]&&(y.enermy=e[6]),!g&&32&a[0]&&(g=!0,y.role=e[5],J((()=>g=!1))),v.$set(y),(!ce||16&a[0]&&R!==(R=d(`end ${!e[4]&&"outRound"}`)+" svelte-12l7lar"))&&S(L,"class",R),(!ce||256&a[0]&&D!==(D="battle "+e[8]+" svelte-12l7lar"))&&S(n,"class",D),e[8]?Se?Se.p(e,a):(Se=Vn(e),Se.c(),Se.m(G,K)):Se&&(Se.d(1),Se=null),(!ce||256&a[0])&&pe!==(pe="win"==e[8]?"胜利":"满身疮痍")&&C(Y,pe);let b=V;V=He(e),V===b?ze[V].p(e,a):(se(),ie(ze[b],1,1,(()=>{ze[b]=null})),oe(),ee=ze[V],ee?ee.p(e,a):(ee=ze[V]=Ce[V](e),ee.c()),re(ee,1),ee.m(X,null)),(!ce||256&a[0]&&te!==(te="z-index:"+(e[8]?5:-1)+";"+(e[8]&&"visibility:visible")))&&S(G,"style",te),(!ce||258&a[0]&&ne!==(ne="body "+e[1]+" "+e[8]+" svelte-12l7lar"))&&S(t,"class",ne)},i(e){ce||(re(l.$$.fragment,e),re(r.$$.fragment,e),re(u.$$.fragment,e),re(v.$$.fragment,e),re(ee),Z((()=>{ce&&(ae&&ae.end(1),le=ue(t,ke,{duration:250}),le.start())})),ce=!0)},o(e){ie(l.$$.fragment,e),ie(r.$$.fragment,e),ie(u.$$.fragment,e),ie(v.$$.fragment,e),ie(ee),le&&le.invalidate(),ae=de(t,ke,{duration:250}),ce=!1},d(e){e&&k(t),ye(l),ye(r),ye(u),ye(v),Se&&Se.d(),ze[V].d(),e&&ae&&ae.end(),me=!1,a(fe)}}}const ll=e=>null;function al(e,t,n){let l,a,s,o,i,c;u(e,He,(e=>n(34,l=e))),u(e,Me,(e=>n(11,a=e))),u(e,Se,(e=>n(12,s=e))),u(e,ze,(e=>n(35,o=e))),u(e,Ae,(e=>n(36,i=e))),u(e,Ce,(e=>n(13,c=e)));const d=deepCopy(s),f=new window.RAF;let p,h,v,g,y,b,_,x,w,k=!0,$="blue",j={equipmentLimit:1};const q={task:{roleEffect:{list:[],handle:e=>y.input(e.content),add(e){this.list.push({content:e,time:25})}},enermyEffect:{list:[{content:{attack:[],buff:[],heal:[]},target:0,time:25}],handle:e=>b.input(e.content,e.target),add(e){this.list.push({content:e,time:25})}}},state:!1,handle(){let e=0;for(let t in this.task)this.task[t].list.length>0?this.state?1==this.task[t].list[0].time?this.task[t].handle(this.task[t].list.shift()):this.task[t].list[0].time--:(this.task[t].handle(this.task[t].list.shift()),this.state=!0):e++;0==e&&(this.state=!1),b.render.handle()}};function M(e){const t={card:e,cost:e==d.role?1:3};return an(d,t,y,b,l),t.cost}function E(){!function(){let e={buff:[],attack:[],heal:[]};H("ghost_lantern",(t=>e.buff.push({value:"interim_barrier",amount:Math.ceil(.05*y.state.get().health*t)*Power.get()}))),y.input(e)}(),n(4,k=!1),_.clear();const e=200,t=b.output(),l=deepCopy(t),a=[{handle:!1,time:2}];let s=f.setInterval((e=>{if(a[0].time-=1,0==a[0].time){a[0].handle&&a[0].handle();const e=l.filter((e=>e)),o=l.length-e.length;x?f.clearInterval(s):0==e.length?(f.clearInterval(s),f.setTimeout((e=>{n(3,g=null),n(4,k=!0)}),400),f.setTimeout((e=>{y.round(O),v(S())}),800)):0==e[0].length?a.push({handle:e=>l[o]=!1,time:6}):(e[0].length==t[o].length&&f.setTimeout((e=>{n(3,g=o),b.round(O,o)}),400),a.push({handle:t=>{b.state()[o].Health<=0?l[o]=!1:(b.input(y.input(e[0][0].output,o),o),_.add({enermy:o,spellcard:e[0][0].spellcard}),e[0].shift())},time:b.state()[o].Health>0?6:1})),a.shift()}}),e)}function O(e){const t={heal:[],attack:[],buff:[]};let n,a=e.state.power;z(e,"in_treatment",(e=>t.heal.push({type:"Rate",value:.05*e}))),z(e,"burning",(e=>t.attack.push({value:.02*e,type:"rate",indirect:!0,critical:!1,aim:"one"}))),z(e,"bleed",(e=>t.attack.push({value:.02*e,type:"rate",indirect:!0,critical:!1,aim:"one"}))),z(e,"hypodynamic",(e=>n=1)),z(e,"star",(n=>{l.bottle_of_stars.filter((t=>t.index==e.index)).forEach((e=>t.attack.push({type:"real",value:e.damage,aim:"one",from:"role",critical:!1}))),m(He,l.bottle_of_stars=l.bottle_of_stars.filter((t=>t.index!=e.index)),l)})),(t.heal.length>0||t.attack.length>0)&&e.input(t);for(let t in e.buff)mn[t].interim&&delete e.buff[t];!n&&e.power(a),a&&(!n&&"marisa"==d.role&&y.power.add(4),function(e,t){d.souvenir==e&&t();d.souvenir}("wanderlust",(e=>y.power.add(Math.floor(y.state.get().speed)))),z(e,"Orrery's_Sun",(t=>{delete e.buff["Orrery's_Sun"];let n={attack:[],heal:[],buff:[]};for(let e=0;e<t;e++)"Orrery's_Sun"in l&&l["Orrery's_Sun"].attack.forEach((e=>{y.output(e,l["Orrery's_Sun"].state).attack.forEach((e=>{e.indirect=!0,n.attack.push(e)}))}));y.input(b.input(n)),delete l["Orrery's_Sun"]})))}function S(){let e=b.state().filter((e=>e.Health>0)),t=e.reduce(((e,t)=>e+t.speed),0)/e.length,n=Math.abs(y.state.get().speed-t),l=n-parseInt(n),a=parseInt(n)+Number(r()<l);return y.state.get().speed>t?a:-a}function C(){if(k)if(j.equipmentLimit>0){const e={attack:[],buff:[],heal:[]};let t=!0;A("mini_bagua_stove",(t=>{e.attack.push({value:400,type:"scale",aim:"all"})})),A("louguanjian",(t=>{e.attack.push({value:.2,type:"Rate",aim:"all"})})),A("hd_camera",(e=>{b.state().map(((e,t)=>b.buff.clear(t,!0))),m(He,l.bottle_of_stars=[],l)})),A("sunshade",(n=>{let l=y.state.get().Health-.3*y.state.get().health;l>0?(y.state.set("Health",l),e.buff.push({value:"barrier",amount:Math.ceil(.6*y.state.get().health),aim:"self"})):(msg({content:"不满足使用条件"}),t=!1)})),y.input(b.input(e)),t&&j.equipmentLimit--}else msg({content:"可使用次数已用尽"});else msg({content:"不在你的回合"})}function z(e,t,n){if(t in e.buff){let l=e.buff[t];e.role&&!mn[t].positive&&H("fish_stone",(e=>l-=e)),n(l>=0?l:0),mn[t].expend&&(1==e.buff[t]?delete e.buff[t]:e.buff[t]--),"star"==t&&delete e.buff[t]}}function H(e,t){e in d.collection&&t(d.collection[e])}function A(e,t){d.equipment==e&&t()}R((e=>{Vt(d,j,y,b,l),setTimeout((e=>v(S()))),i.add("battleWorker",(e=>q.handle()),1)}));return[p,h,v,g,k,y,b,_,x,w,$,a,s,c,d,function(e){const t={cost:M(h)};if(k)if(t.cost>y.power.get())msg({content:"灵力不足"});else{p(),y.power.cost(t.cost);let a=b.input(y.output(h),e);sn(d,t,y,b,l,a),y.input(a,e),n(1,h=null)}else msg({content:"不在你的回合"})},M,E,function(e){const t={attack:[],heal:[],buff:[]};H("bird_wine",(e=>t.buff.push({value:"burning",amount:e,aim:"all"}))),b.input(t),H("crown_of_thorns",(e=>y.power.add(e))),b.state().filter((e=>e.Health>0)).length<=1&&(m(Se,s.health=Math.ceil(y.state.get().Health),s),m(Se,s.lv++,s),m(ze,o.lv++,o),m(ze,o.enermy=o.enermy.filter(((e,t)=>!o.target[t])),o),m(He,l={},l),o.target.map(((e,t)=>e&&o.enermy[t])).filter((e=>e)).forEach((e=>{"red"!=$&&"elite"==Dt[e].type&&n(10,$="green"),"red"==Dt[e].type&&n(10,$="red")})),w("collection",$,(e=>m(Me,a="Explore",a))),f.setTimeout((e=>{n(8,x="win")}),1200))},function(e){n(8,x="dead"),s.chance.amount>0?(m(Se,s.chance.amount--,s),m(Se,s.lv++,s),m(Se,s.health=Ge.role[s.role](s.lv).health,s),n(10,$=s.chance.type),w("collection",$,(e=>m(Me,a="Explore",a)))):n(10,$=!1)},function(e){let t=.05;if("role"==e){let e=y.state.get();H("burning_seashore_flower",(n=>t+=Math.floor((e.health-e.Health)/e.health*100)*(.005+.0025*(n-1)))),H("fluorescent_zanthoxylum",(e=>t+=.05*e))}return t},C,function(e){b=e,n(6,b)},function(e){_=e,n(7,_)},function(e){p=e,n(0,p)},function(e){h=e,n(1,h)},function(e){v=e,n(2,v)},function(e){y=e,n(5,y)},e=>C(),e=>k&&E(),function(e){w=e,n(9,w)},e=>{m(Me,a="Explore",a),m(Se,s.coin+="blue"==$?100:"green"==$?300:1500,s)},e=>m(Me,a="Index",a)]}class sl extends xe{constructor(e){super(),_e(this,e,al,nl,o,{},null,[-1,-1])}}var ol={doubtful_potion:{name:"可疑的药水",detail:"生命值随机变动-50%至50%。",source:"event"},heart_fire_of_grace:{name:"恩惠的心之火",detail:"本场战斗中第一次受到致命伤害时，免疫所有伤害，持续一回合。",source:"shop"},gift_from_ergen:{name:"厄神的小礼物",detail:"对方全体攻击降低20%，持续三回合。",source:"event"},good_corn:{name:"上好的玉米",detail:"驱散自身所有负面效果。",source:"shop"},banana:{name:"香蕉",detail:"回复17生命值。",source:"event"}},rl={a000:{name:"了断",detail:"一次性:本回合\n通式消耗-1",cost:2,expend:!0},a001:{name:"森罗万象",detail:"一次性:抽牌至上限",cost:2,expend:!0},a002:{name:"小憩",detail:"回复8%最大生命",cost:1},a003:{name:"圣骑士",detail:"150%伤害\n获得15%最大生命\n防御结界",cost:2},a004:{name:"灵力冲天炮",detail:"消耗全部灵力\n每消耗1灵力，造成100%攻击力伤害",cost:2},a005:{name:"顿悟",detail:"获得一张不消耗灵力的随机通式",cost:2},a006:{name:"虚空",detail:"免疫一次伤害\n抽一张牌",cost:1},a007:{name:"抛硬币",detail:"损失1硬币\n概率判定均为正面\n持续一回合",cost:2},a008:{name:"你好烧",detail:"附加燃烧*3",cost:2},a009:{name:"摸摸你的",detail:"80%攻击力伤害\n获得5硬币",cost:1},a010:{name:"思考加速",detail:"丢弃一张牌\n抽两张牌",cost:1},a011:{name:"直觉",detail:"丢弃一张符卡\n普攻伤害+30%\n持续一回合",cost:2},a012:{name:"傲慢",detail:"抽一张牌\n获得2额外灵力",cost:0},a013:{name:"强欲",detail:"抽两张牌",cost:2},a014:{name:"暴怒",detail:"每使用一张通式\n符卡伤害+10%\n持续一回合",cost:3},a015:{name:"暴食",detail:"一次性:获得\n等同于灵力上限的\n额外灵力",cost:0,expend:!0},a016:{name:"色欲",detail:"指定目标下次行动为100%攻击力伤害",cost:2},a017:{name:"嫉妒",detail:"自身和全体敌人\n获得20%最大生命\n临时防御结界",cost:2},a018:{name:"怠惰",detail:"造成和上一张打出的牌同样的效果",cost:2},a019:{name:"灵眼",detail:"丢弃所有手牌\n抽取等量手牌",cost:2},a020:{name:"魔眼",detail:"从弃牌堆中抽两张牌",cost:2},a021:{name:"制裁",detail:"丢弃一张手牌\n造成100%攻击力\n群体伤害",cost:2},a022:{name:"大憩",detail:"回复20%最大生命",cost:2},a023:{name:"深渊之殇",detail:"造成等同于自身当前生命40%的伤害",cost:2},a024:{name:"节奏感",detail:"一次性:本场战斗\n每使用一张通式\n回复5%最大生命",cost:3,expend:!0},a025:{name:"魔豆",detail:"一次性:每回合获得\n2额外灵力\n持续3回合",cost:1,expend:!0},a026:{name:"以血为刃",detail:"攻击附带20%最大生命增伤，减少5%最大生命，持续一回合",cost:2}},il={collection:{portable_money_box:"她经常要暴打妖怪，解决异变，人们很尊敬她。\n但那神社在人迹罕至的山里头。\n对了，随身带着赛钱箱不就好了。",bronze_mirror:"“这是我在竹林里捡到的镜子。”\n“应该叫毛玻璃？是半透明的。还很糊。”\n“但如果像这样对它发射一束光线。”\n“光线居然同时发生了穿透和反射！”\n“不过它的折射角度我就没法控制就是了。”",mimosa:"“老师快看呀，这棵含羞草只有三片叶子！”\n“碰一下试试？”\n叶子收拢了，相邻的那两片叶子靠在了一起。\n“那片叶子好孤独……”\n“但它坚持了该做的事。”",compass_cat:"“稀客啊。”\n“你居然还养了猫。”\n“你那不也有两只兔子。”\n“我总是觉得猫的眼睛……很像指南针。”\n“它在竹林里也不会迷路呢。”\n“那就给它起名叫罗盘猫吧。”\n“不要。”",bird_wine:"“我感觉到了，这节竹子里有东西。”\n“雀酒！”\n“也可能是青蛙？”\n“青蛙！”",frozen_frog:"敬请期待",fluorescent_zanthoxylum:"敬请期待",corvis_feathers:"“哇——哇——”\n“这乌鸦好烦。”\n一颗石子丢了过去，但树上只落下一根羽毛。\n“啊呀，乌鸦可是能预言凶兆，带来吉祥的哦。”\n“真不巧，我就是凶兆本人，连我妹妹都奈何不了我。”\n“这样啊，乌鸦的羽毛或许能抵消一些不幸，试试？”\n“嗯。”\n“噢，这根不行，这是我身上的。”",sundial:"“这是，日晷？”\n“在红雾之下的话，要用特别的方法才能知道时间。”\n“也就是说用不上了？说起来我家那片森林也见不到阳光呢。”\n“不行。”\n“那这个我也借走啦。”\n“老鼠。”",pickled_radish:"敬请期待",conch_shell:"“我在藏书的仓库里发现了这个。”\n“是海螺壳呢。”\n“幻想乡有海吗？”\n“月亮上，有的。”\n“我父亲居然上过月球。”\n“但那海里没有生命呢。”\n“难不成......”\n“嗯，是陶瓷的。”\n",cursed_wind_chimes:"“不是刮着风吗，这风铃怎么不会响。”\n“被诅咒了。或者成精了。”\n“也就是说，要做点驱魔仪式什么的吗？”\n“不，要是哪一天突然跑出来一个付丧神，我就不用自己打扫神社了。”\n“真懒呀。”\n“你家可比我这糟蹋多了。”\n“啰嗦。”",ghost_lantern:"敬请期待",vampires_old_tooth:"前端略尖的牙齿。\n“她小时候换牙换下来的旧牙，我一直收藏着。”\n“能感觉到残存的强大力量，或许能作为大魔法的媒介。”\n“真的？”\n“假的。”",large_roll_of_bandages:"“这、这个尺寸，你究竟是谁？”\n“裹胸用的绷带被某个仙人顺走了啦。”\n“呀，还有这种事。”\n“还有人顺走过扫帚呢。”\n“诶嘿嘿。”",burning_seashore_flower:"“又在这偷懒？”\n“这株彼岸花，由于强大的意念在燃烧着，燃不尽。”\n“要是会引起麻烦就早点退治掉好了。”\n“你不会懂的，正是这份意念传达不出去，才会如此强大。”\n“所以？”\n“请您也不要将我偷懒的事说出去！”",skyrocket:"“在偷拍吗！”\n“啊呀呀，吓我一跳。毕竟巫女难得要出门了嘛，你呢？”\n“我拿到了一个好玩的火箭烟花，来吓一吓她。”\n向着巫女，窜天猴“嗖——”地飞出去。\n飞进了神社的赛钱箱里。",magic_dart:"“这个是未完成品，可以用魔力进行导向的飞镖。”\n“听起来很有意思，便宜卖我呗。”\n“都说了是未完成——小心！”\n“呀，戳我屁股上了。”\n“没受伤吧？”\n“当然没有。”",fox_jade:"敬请期待",cherry:"敬请期待",earthy_spider_wine:"敬请期待",amulet_of_full_moon:"敬请期待",seal_needle:"“真巧啊。”\n“……嗯，很巧呢。”\n“我想委托你给封魔针加些新功能。”\n“然后呢？然后你就要用新的封魔针退治我了吗？”\n“当然不。”\n“真的？”\n“我的赛钱箱被炸了个洞，我先退治完你再去找你。”",crown_of_thorns:"敬请期待",red_and_white_scarf:"敬请期待",bottle_of_stars:"“天上的星星非常亮呢，地上的什么东西，经过了自我燃烧，也可以变成星星的吧。”\n“地上的星星，不装进瓶子里的话迟早会燃尽的。”\n“哈，那不如就放任它去绽放，哪怕只有一瞬间，或许会比天上的星星还亮哦。”",normal_stone:"敬请期待",blade_of_yellow_spring:"敬请期待",blood_book:"敬请期待",human_soul_lamp:"敬请期待",patchoulis_ribbon:"敬请期待",fish_stone:"敬请期待",crypto_cloak:"敬请期待",shy_rabbit:"敬请期待",dimensional_pocket:"敬请期待",terrible_ring:"敬请期待"},souvenir:{nodas_hat:"献给挚爱的「你」的「REALLUTION」",microlithic_fish:"诶？",ahabs_opinion:"爱丽丝的汗脚不应该甘之如饴吗？",mimicry_cat_pendant:"Great ideals but through selfless struggle and sacrifice to achieve.",wanderlust:"还不可以认输！\n绝望中，仍存有一线生机！\n\n龙战于野，其血玄黄！\n潜龙勿用，藏锋守拙！",miyanos_bottle:"愿其余命尚存之时，至少让它绽放本色。"},equipment:{gongonier:"敬请期待",sword_of_feixiang:"敬请期待",sunshade:"敬请期待",mirror_of_pear:"敬请期待",mini_bagua_stove:"敬请期待",louguanjian:"敬请期待",hd_camera:"敬请期待",repentance_rod:"敬请期待",circular_fan:"敬请期待"},consumable:{doubtful_potion:"敬请期待",heart_fire_of_grace:"敬请期待",gift_from_ergen:"敬请期待",good_corn:"敬请期待",banana:"敬请期待"}};function cl(t){let n,l,a,o,r,i,c,u,m,f,p,h,v,g,y,_,x=t[6][t[0]].name+"",$=t[6][t[0]].detail+"";return{c(){n=j("div"),l=j("txt"),a=q(t[4]),o=M(),r=j("icon"),c=M(),u=j("txt"),m=q(x),f=M(),p=j("div"),h=j("txt"),v=q($),S(l,"class","cost svelte-1g0vxb3"),S(r,"class",i="icon-"+t[0]+" svelte-1g0vxb3"),S(u,"class","name svelte-1g0vxb3"),S(p,"class","detail svelte-1g0vxb3"),S(n,"class",g=d(`spellcard ${t[2]&&"selectedSpellcard"} ${t[3]&&"animate_useSpellcard"} ${t[5]}`)+" svelte-1g0vxb3")},m(e,i){w(e,n,i),b(n,l),b(l,a),b(n,o),b(n,r),b(n,c),b(n,u),b(u,m),b(n,f),b(n,p),b(p,h),b(h,v),y||(_=O(n,"click",(function(){s(t[1])&&t[1].apply(this,arguments)})),y=!0)},p(e,[l]){t=e,16&l&&C(a,t[4]),1&l&&i!==(i="icon-"+t[0]+" svelte-1g0vxb3")&&S(r,"class",i),1&l&&x!==(x=t[6][t[0]].name+"")&&C(m,x),1&l&&$!==($=t[6][t[0]].detail+"")&&C(v,$),12&l&&g!==(g=d(`spellcard ${t[2]&&"selectedSpellcard"} ${t[3]&&"animate_useSpellcard"} ${t[5]}`)+" svelte-1g0vxb3")&&S(n,"class",g)},i:e,o:e,d(e){e&&k(n),y=!1,_()}}}function ul(e,t,n){let l,{key:a}=t,{action:s=(e=>null)}=t,{selected:o=!1}=t,{used:r=!1}=t,i=Object.keys(Pe).includes(a)?Pe[a].role:"base",c=Object.assign(deepCopy(Pe),deepCopy(rl));return l=a==i?1:a in Pe?3:rl[a].cost,e.$$set=e=>{"key"in e&&n(0,a=e.key),"action"in e&&n(1,s=e.action),"selected"in e&&n(2,o=e.selected),"used"in e&&n(3,r=e.used)},[a,s,o,r,l,i,c]}class dl extends xe{constructor(e){super(),_e(this,e,ul,cl,o,{key:0,action:1,selected:2,used:3})}}function ml(e,t,n){const l=e.slice();return l[38]=t[n],l[40]=n,l}function fl(e,t,n){const l=e.slice();return l[41]=t[n],l[42]=t,l[40]=n,l}function pl(e,t,n){const l=e.slice();return l[43]=t[n],l[45]=n,l}function hl(e,t,n){const l=e.slice();return l[43]=t[n],l[40]=n,l}function vl(e,t,n){const l=e.slice();return l[43]=t[n],l[40]=n,l}function gl(e,t,n){const l=e.slice();return l[43]=t[n],l[40]=n,l}function yl(e,t,n){const l=e.slice();return l[43]=t[n],l[45]=n,l}function bl(e,t,n){const l=e.slice();return l[50]=t[n],l[40]=n,l}function _l(e){let t,n,l,a,s=[],o=new Map,r=["blue","green","red"];const i=e=>e[45];for(let t=0;t<3;t+=1){let n=yl(e,r,t),l=i(n);o.set(l,s[t]=wl(l,n))}return{c(){t=j("div");for(let e=0;e<3;e+=1)s[e].c();S(t,"class","collections container svelte-gwer32")},m(e,n){w(e,t,n);for(let e=0;e<3;e+=1)s[e]&&s[e].m(t,null);a=!0},p(e,n){6&n[0]&&(r=["blue","green","red"],s=pe(s,n,i,1,e,r,o,t,me,wl,null,yl))},i(e){a||(Z((()=>{a&&(l&&l.end(1),n=ue(t,ke,{duration:200}),n.start())})),a=!0)},o(e){n&&n.invalidate(),l=de(t,ke,{duration:200}),a=!1},d(e){e&&k(t);for(let e=0;e<3;e+=1)s[e].d();e&&l&&l.end()}}}function xl(e,t){let n,l,s,o,r,i;function c(...e){return t[13](t[50],...e)}function u(...e){return t[15](t[50],t[43],...e)}return{key:e,first:null,c(){n=j("div"),l=j("icon"),s=M(),S(l,"class","icon-"+t[50]+" svelte-gwer32"),S(n,"class",o=d(t[1]==t[50]&&"selected")+" svelte-gwer32"),this.first=n},m(e,a){w(e,n,a),b(n,l),b(n,s),r||(i=[O(n,"click",c),O(n,"mouseenter",t[14]),O(n,"mousemove",u),O(n,"mouseleave",t[16])],r=!0)},p(e,l){t=e,2&l[0]&&o!==(o=d(t[1]==t[50]&&"selected")+" svelte-gwer32")&&S(n,"class",o)},d(e){e&&k(n),r=!1,a(i)}}}function wl(e,t){let n,l,a=[],s=new Map;function o(...e){return t[12](t[43],...e)}let r=Object.keys(Ne).filter(o);const i=e=>e[40];for(let e=0;e<r.length;e+=1){let n=bl(t,r,e),l=i(n);s.set(l,a[e]=xl(l,n))}return{key:e,first:null,c(){n=E();for(let e=0;e<a.length;e+=1)a[e].c();l=E(),this.first=n},m(e,t){w(e,n,t);for(let n=0;n<a.length;n+=1)a[n]&&a[n].m(e,t);w(e,l,t)},p(e,n){t=e,6&n[0]&&(r=Object.keys(Ne).filter(o),a=pe(a,n,i,1,t,r,s,l.parentNode,me,xl,l,bl))},d(e){e&&k(n);for(let t=0;t<a.length;t+=1)a[t].d(e);e&&k(l)}}}function kl(e){let t,n,l,a,s=[],o=new Map,r=Object.keys(De);const i=e=>e[40];for(let t=0;t<r.length;t+=1){let n=gl(e,r,t),l=i(n);o.set(l,s[t]=$l(l,n))}return{c(){t=j("div");for(let e=0;e<s.length;e+=1)s[e].c();S(t,"class","souvenirs container svelte-gwer32")},m(e,n){w(e,t,n);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null);a=!0},p(e,n){6&n[0]&&(r=Object.keys(De),s=pe(s,n,i,1,e,r,o,t,me,$l,null,gl))},i(e){a||(Z((()=>{a&&(l&&l.end(1),n=ue(t,ke,{duration:200}),n.start())})),a=!0)},o(e){n&&n.invalidate(),l=de(t,ke,{duration:200}),a=!1},d(e){e&&k(t);for(let e=0;e<s.length;e+=1)s[e].d();e&&l&&l.end()}}}function $l(e,t){let n,l,s,o,r,i;function c(...e){return t[17](t[43],...e)}function u(...e){return t[19](t[43],...e)}return{key:e,first:null,c(){n=j("div"),l=j("icon"),s=M(),S(l,"class","icon-"+t[43]+" svelte-gwer32"),S(n,"class",o=d(t[1]==t[43]&&"selected")+" svelte-gwer32"),this.first=n},m(e,a){w(e,n,a),b(n,l),b(n,s),r||(i=[O(n,"click",c),O(n,"mouseenter",t[18]),O(n,"mousemove",u),O(n,"mouseleave",t[20])],r=!0)},p(e,l){t=e,2&l[0]&&o!==(o=d(t[1]==t[43]&&"selected")+" svelte-gwer32")&&S(n,"class",o)},d(e){e&&k(n),r=!1,a(i)}}}function jl(e){let t,n,l,a,s=[],o=new Map,r=Object.keys(Re);const i=e=>e[40];for(let t=0;t<r.length;t+=1){let n=vl(e,r,t),l=i(n);o.set(l,s[t]=ql(l,n))}return{c(){t=j("div");for(let e=0;e<s.length;e+=1)s[e].c();S(t,"class","equipments container svelte-gwer32")},m(e,n){w(e,t,n);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null);a=!0},p(e,n){6&n[0]&&(r=Object.keys(Re),s=pe(s,n,i,1,e,r,o,t,me,ql,null,vl))},i(e){a||(Z((()=>{a&&(l&&l.end(1),n=ue(t,ke,{duration:200}),n.start())})),a=!0)},o(e){n&&n.invalidate(),l=de(t,ke,{duration:200}),a=!1},d(e){e&&k(t);for(let e=0;e<s.length;e+=1)s[e].d();e&&l&&l.end()}}}function ql(e,t){let n,l,s,o,r,i;function c(...e){return t[21](t[43],...e)}function u(...e){return t[23](t[43],...e)}return{key:e,first:null,c(){n=j("div"),l=j("icon"),s=M(),S(l,"class","icon-"+t[43]+" svelte-gwer32"),S(n,"class",o=d(t[1]==t[43]&&"selected")+" svelte-gwer32"),this.first=n},m(e,a){w(e,n,a),b(n,l),b(n,s),r||(i=[O(n,"click",c),O(n,"mouseenter",t[22]),O(n,"mousemove",u),O(n,"mouseleave",t[24])],r=!0)},p(e,l){t=e,2&l[0]&&o!==(o=d(t[1]==t[43]&&"selected")+" svelte-gwer32")&&S(n,"class",o)},d(e){e&&k(n),r=!1,a(i)}}}function Ml(e){let t,n,l,a,s=[],o=new Map,r=Object.keys(ol);const i=e=>e[40];for(let t=0;t<r.length;t+=1){let n=hl(e,r,t),l=i(n);o.set(l,s[t]=El(l,n))}return{c(){t=j("div");for(let e=0;e<s.length;e+=1)s[e].c();S(t,"class","consumables container svelte-gwer32")},m(e,n){w(e,t,n);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null);a=!0},p(e,n){6&n[0]&&(r=Object.keys(ol),s=pe(s,n,i,1,e,r,o,t,me,El,null,hl))},i(e){a||(Z((()=>{a&&(l&&l.end(1),n=ue(t,ke,{duration:200}),n.start())})),a=!0)},o(e){n&&n.invalidate(),l=de(t,ke,{duration:200}),a=!1},d(e){e&&k(t);for(let e=0;e<s.length;e+=1)s[e].d();e&&l&&l.end()}}}function El(e,t){let n,l,s,o,r,i;function c(...e){return t[25](t[43],...e)}function u(...e){return t[27](t[43],...e)}return{key:e,first:null,c(){n=j("div"),l=j("icon"),s=M(),S(l,"class","icon-"+t[43]+" svelte-gwer32"),S(n,"class",o=d(t[1]==t[43]&&"selected")+" svelte-gwer32"),this.first=n},m(e,a){w(e,n,a),b(n,l),b(n,s),r||(i=[O(n,"click",c),O(n,"mouseenter",t[26]),O(n,"mousemove",u),O(n,"mouseleave",t[28])],r=!0)},p(e,l){t=e,2&l[0]&&o!==(o=d(t[1]==t[43]&&"selected")+" svelte-gwer32")&&S(n,"class",o)},d(e){e&&k(n),r=!1,a(i)}}}function Ol(e){let t,n,l,a,s=[],o=new Map,r=Object.keys(We);const i=e=>e[40];for(let t=0;t<r.length;t+=1){let n=fl(e,r,t),l=i(n);o.set(l,s[t]=Cl(l,n))}return{c(){t=j("div");for(let e=0;e<s.length;e+=1)s[e].c();S(t,"class","spellcard container svelte-gwer32")},m(e,n){w(e,t,n);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null);a=!0},p(e,n){12&n[0]&&(r=Object.keys(We),se(),s=pe(s,n,i,1,e,r,o,t,fe,Cl,null,fl),oe())},i(e){if(!a){for(let e=0;e<r.length;e+=1)re(s[e]);Z((()=>{a&&(l&&l.end(1),n=ue(t,ke,{duration:200}),n.start())})),a=!0}},o(e){for(let e=0;e<s.length;e+=1)ie(s[e]);n&&n.invalidate(),l=de(t,ke,{duration:200}),a=!1},d(e){e&&k(t);for(let e=0;e<s.length;e+=1)s[e].d();e&&l&&l.end()}}}function Sl(e,t){let n,l,a;return l=new dl({props:{key:t[43]}}),{key:e,first:null,c(){n=E(),ve(l.$$.fragment),this.first=n},m(e,t){w(e,n,t),ge(l,e,t),a=!0},p(e,n){t=e},i(e){a||(re(l.$$.fragment,e),a=!0)},o(e){ie(l.$$.fragment,e),a=!1},d(e){e&&k(n),ye(l,e)}}}function Cl(e,t){let n,l,s,o,r,i,u,d,m,f,p,h,v,g=We[t[41]].name+"",y=[],_=new Map,x=t[41];function $(...e){return t[30](t[41],...e)}function E(...e){return t[33](t[41],...e)}function C(...e){return t[35](t[41],...e)}let z=Object.keys(Pe).filter(C);const H=e=>e[45];for(let e=0;e<z.length;e+=1){let n=pl(t,z,e),l=H(n);_.set(l,y[e]=Sl(l,n))}const A=()=>t[36](d,x),I=()=>t[36](null,x);return{key:e,first:null,c(){n=j("div"),l=j("img"),o=M(),r=j("txt"),i=q(g),u=M(),d=j("div"),m=j("div");for(let e=0;e<y.length;e+=1)y[e].c();f=M(),S(l,"class","avatar svelte-gwer32"),c(l.src,s="/img/role/dairi/"+t[41]+".webp")||S(l,"src",s),S(r,"class","role svelte-gwer32"),S(m,"class","svelte-gwer32"),S(d,"class","spellcards svelte-gwer32"),S(n,"class","svelte-gwer32"),this.first=n},m(e,a){w(e,n,a),b(n,l),b(n,o),b(n,r),b(r,i),b(n,u),b(n,d),b(d,m);for(let e=0;e<y.length;e+=1)y[e]&&y[e].m(m,null);A(),b(n,f),p=!0,h||(v=[O(l,"mouseenter",t[29]),O(l,"mousemove",$),O(l,"mouseleave",t[31]),O(r,"mouseenter",t[32]),O(r,"mousemove",E),O(r,"mouseleave",t[34])],h=!0)},p(e,n){t=e,0&n&&(z=Object.keys(Pe).filter(C),se(),y=pe(y,n,H,1,t,z,_,m,fe,Sl,null,pl),oe()),x!==t[41]&&(I(),x=t[41],A())},i(e){if(!p){for(let e=0;e<z.length;e+=1)re(y[e]);p=!0}},o(e){for(let e=0;e<y.length;e+=1)ie(y[e]);p=!1},d(e){e&&k(n);for(let e=0;e<y.length;e+=1)y[e].d();I(),h=!1,a(v)}}}function zl(e){let t,n,l=[],a=new Map,s=Object.keys(rl);const o=e=>e[40];for(let t=0;t<s.length;t+=1){let n=ml(e,s,t),r=o(n);a.set(r,l[t]=Hl(r,n))}return{c(){t=j("div");for(let e=0;e<l.length;e+=1)l[e].c();S(t,"class","basecard container svelte-gwer32")},m(e,a){w(e,t,a);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,null);n=!0},p(e,n){0&n&&(s=Object.keys(rl),se(),l=pe(l,n,o,1,e,s,a,t,fe,Hl,null,ml),oe())},i(e){if(!n){for(let e=0;e<s.length;e+=1)re(l[e]);n=!0}},o(e){for(let e=0;e<l.length;e+=1)ie(l[e]);n=!1},d(e){e&&k(t);for(let e=0;e<l.length;e+=1)l[e].d()}}}function Hl(e,t){let n,l,a;return l=new dl({props:{key:t[38]}}),{key:e,first:null,c(){n=j("div"),ve(l.$$.fragment),S(n,"class","svelte-gwer32"),this.first=n},m(e,t){w(e,n,t),ge(l,n,null),a=!0},p(e,n){t=e},i(e){a||(re(l.$$.fragment,e),a=!0)},o(e){ie(l.$$.fragment,e),a=!1},d(e){e&&k(n),ye(l)}}}function Al(e){let t,n,l,a,s,o,r,i,c,u,d,m,f,p,h,v=e[4][e[0]][e[1]].name+"",g=e[4][e[0]][e[1]].detail+"",y=il[e[0]][e[1]]+"";return{c(){t=j("div"),n=j("icon"),a=M(),s=j("txt"),o=q(v),r=M(),i=j("txt"),c=q(g),u=M(),d=j("txt"),m=q(y),S(n,"class",l="icon-"+e[1]+" svelte-gwer32"),S(s,"class","name svelte-gwer32"),S(i,"class","effect svelte-gwer32"),S(d,"class","story svelte-gwer32"),S(t,"class","detail container svelte-gwer32")},m(e,l){w(e,t,l),b(t,n),b(t,a),b(t,s),b(s,o),b(t,r),b(t,i),b(i,c),b(t,u),b(t,d),b(d,m),h=!0},p(e,t){(!h||2&t[0]&&l!==(l="icon-"+e[1]+" svelte-gwer32"))&&S(n,"class",l),(!h||3&t[0])&&v!==(v=e[4][e[0]][e[1]].name+"")&&C(o,v),(!h||3&t[0])&&g!==(g=e[4][e[0]][e[1]].detail+"")&&C(c,g),(!h||3&t[0])&&y!==(y=il[e[0]][e[1]]+"")&&C(m,y)},i(e){h||(Z((()=>{h&&(p&&p.end(1),f=ue(t,ke,{duration:200}),f.start())})),h=!0)},o(e){f&&f.invalidate(),p=de(t,ke,{duration:200}),h=!1},d(e){e&&k(t),e&&p&&p.end()}}}function Il(e){let t,n,l,s,o,r,i,c,u,m,f,p,h,v,g,y,_,x,$,E,C,z,H,A,I,T,B,F,L,N,R,D,P,W,G,K,X,J,U="collection"==e[0]&&_l(e),Y="souvenir"==e[0]&&kl(e),Q="equipment"==e[0]&&jl(e),V="consumable"==e[0]&&Ml(e),ee="spellcard"==e[0]&&Ol(e),te="basecard"==e[0]&&zl(e),ne=e[1]&&Al(e);return{c(){t=j("div"),n=j("div"),l=j("txt"),s=q("收藏品"),r=M(),i=j("txt"),c=q("纪念品"),m=M(),f=j("txt"),p=q("装备"),v=M(),g=j("txt"),y=q("符卡"),x=M(),$=j("txt"),E=q("通式"),z=M(),H=j("txt"),A=q("消耗品"),T=M(),B=j("div"),U&&U.c(),F=M(),Y&&Y.c(),L=M(),Q&&Q.c(),N=M(),V&&V.c(),R=M(),ee&&ee.c(),D=M(),te&&te.c(),P=M(),ne&&ne.c(),S(l,"class",o=d("collection"==e[0]&&"selected")+" svelte-gwer32"),S(i,"class",u=d("souvenir"==e[0]&&"selected")+" svelte-gwer32"),S(f,"class",h=d("equipment"==e[0]&&"selected")+" svelte-gwer32"),S(g,"class",_=d("spellcard"==e[0]&&"selected")+" svelte-gwer32"),S($,"class",C=d("basecard"==e[0]&&"selected")+" svelte-gwer32"),S(H,"class",I=d("consumable"==e[0]&&"selected")+" svelte-gwer32"),S(n,"class","index svelte-gwer32"),S(B,"class","main svelte-gwer32"),S(t,"class","body svelte-gwer32")},m(a,o){w(a,t,o),b(t,n),b(n,l),b(l,s),b(n,r),b(n,i),b(i,c),b(n,m),b(n,f),b(f,p),b(n,v),b(n,g),b(g,y),b(n,x),b(n,$),b($,E),b(n,z),b(n,H),b(H,A),b(t,T),b(t,B),U&&U.m(B,null),b(B,F),Y&&Y.m(B,null),b(B,L),Q&&Q.m(B,null),b(B,N),V&&V.m(B,null),b(B,R),ee&&ee.m(B,null),b(B,D),te&&te.m(B,null),b(B,P),ne&&ne.m(B,null),K=!0,X||(J=[O(l,"click",e[6]),O(i,"click",e[7]),O(f,"click",e[8]),O(g,"click",e[9]),O($,"click",e[10]),O(H,"click",e[11])],X=!0)},p(e,t){(!K||1&t[0]&&o!==(o=d("collection"==e[0]&&"selected")+" svelte-gwer32"))&&S(l,"class",o),(!K||1&t[0]&&u!==(u=d("souvenir"==e[0]&&"selected")+" svelte-gwer32"))&&S(i,"class",u),(!K||1&t[0]&&h!==(h=d("equipment"==e[0]&&"selected")+" svelte-gwer32"))&&S(f,"class",h),(!K||1&t[0]&&_!==(_=d("spellcard"==e[0]&&"selected")+" svelte-gwer32"))&&S(g,"class",_),(!K||1&t[0]&&C!==(C=d("basecard"==e[0]&&"selected")+" svelte-gwer32"))&&S($,"class",C),(!K||1&t[0]&&I!==(I=d("consumable"==e[0]&&"selected")+" svelte-gwer32"))&&S(H,"class",I),"collection"==e[0]?U?(U.p(e,t),1&t[0]&&re(U,1)):(U=_l(e),U.c(),re(U,1),U.m(B,F)):U&&(se(),ie(U,1,1,(()=>{U=null})),oe()),"souvenir"==e[0]?Y?(Y.p(e,t),1&t[0]&&re(Y,1)):(Y=kl(e),Y.c(),re(Y,1),Y.m(B,L)):Y&&(se(),ie(Y,1,1,(()=>{Y=null})),oe()),"equipment"==e[0]?Q?(Q.p(e,t),1&t[0]&&re(Q,1)):(Q=jl(e),Q.c(),re(Q,1),Q.m(B,N)):Q&&(se(),ie(Q,1,1,(()=>{Q=null})),oe()),"consumable"==e[0]?V?(V.p(e,t),1&t[0]&&re(V,1)):(V=Ml(e),V.c(),re(V,1),V.m(B,R)):V&&(se(),ie(V,1,1,(()=>{V=null})),oe()),"spellcard"==e[0]?ee?(ee.p(e,t),1&t[0]&&re(ee,1)):(ee=Ol(e),ee.c(),re(ee,1),ee.m(B,D)):ee&&(se(),ie(ee,1,1,(()=>{ee=null})),oe()),"basecard"==e[0]?te?(te.p(e,t),1&t[0]&&re(te,1)):(te=zl(e),te.c(),re(te,1),te.m(B,P)):te&&(se(),ie(te,1,1,(()=>{te=null})),oe()),e[1]?ne?(ne.p(e,t),2&t[0]&&re(ne,1)):(ne=Al(e),ne.c(),re(ne,1),ne.m(B,null)):ne&&(se(),ie(ne,1,1,(()=>{ne=null})),oe())},i(e){K||(re(U),re(Y),re(Q),re(V),re(ee),re(te),re(ne),Z((()=>{K&&(G&&G.end(1),W=ue(t,ke,{duration:250}),W.start())})),K=!0)},o(e){ie(U),ie(Y),ie(Q),ie(V),ie(ee),ie(te),ie(ne),W&&W.invalidate(),G=de(t,ke,{duration:250}),K=!1},d(e){e&&k(t),U&&U.d(),Y&&Y.d(),Q&&Q.d(),V&&V.d(),ee&&ee.d(),te&&te.d(),ne&&ne.d(),e&&G&&G.end(),X=!1,a(J)}}}function Tl(e,t,n){let l;u(e,Oe,(e=>n(37,l=e)));let a="spellcard",s=null;const o={collection:Ne,equipment:Re,souvenir:De,spellcard:Pe,role:We,consumable:ol,basecard:rl};let r;const i={};for(let e in We)i[e]=0;var c;function d(e){n(1,s=null),n(0,a=e)}R((e=>{n(2,r=l)})),c=e=>{if("spellcard"==a)for(let e in i)n(3,i[e].onmousedown=t=>{let l=i[e].scrollLeft;n(3,i[e].onmousemove=a=>{n(3,i[e].scrollLeft=l+t.clientX-a.clientX,i)},i),n(3,i[e].onmouseup=t=>n(3,i[e].onmousemove=null,i),i),n(3,i[e].onmouseleave=t=>n(3,i[e].onmousemove=null,i),i)},i)},N().$$.after_update.push(c);return[a,s,r,i,o,d,e=>d("collection"),e=>d("souvenir"),e=>d("equipment"),e=>d("spellcard"),e=>d("basecard"),e=>d("consumable"),(e,t)=>Ne[t].type==e,(e,t)=>n(1,s=e),e=>r.show(e),(e,t,n)=>r.move(n,Ne[e],t),e=>r.hide(),(e,t)=>n(1,s=e),e=>r.show(e),(e,t)=>r.move(t,De[e],"purple"),e=>r.hide(),(e,t)=>n(1,s=e),e=>r.show(e),(e,t)=>r.move(t,Re[e],"gold"),e=>r.hide(),(e,t)=>n(1,s=e),e=>r.show(e),(e,t)=>r.move(t,ol[e],"blue"),e=>r.hide(),e=>r.show(e),(e,t)=>r.move(t,{name:We[e].name,detail:We[e].talent},"blue"),e=>r.hide(),e=>r.show(e),(e,t)=>r.move(t,{name:We[e].name,detail:`${We[e].detail}\n灵力上限：${Ge.role[e](1).power}`},"blue"),e=>r.hide(),(e,t)=>Pe[t].role==e,function(e,t){P[e?"unshift":"push"]((()=>{i[t]=e,n(3,i)}))}]}class Bl extends xe{constructor(e){super(),_e(this,e,Tl,Il,o,{},null,[-1,-1])}}function Fl(e){let t,n,l,a,s,o,r,i,c,u,d,m;var f=e[2][e[1]];function p(t){e[3](t)}f&&(n=H(f,{})),a=new Le({});let h={};return void 0!==e[0]&&(h.menu=e[0]),o=new ct({props:h}),P.push((()=>he(o,"menu",p))),c=new ft({}),{c(){t=j("div"),n&&ve(n.$$.fragment),l=M(),ve(a.$$.fragment),s=M(),ve(o.$$.fragment),i=M(),ve(c.$$.fragment),S(t,"id","root"),S(t,"class","svelte-g4jctk")},m(r,f){w(r,t,f),n&&ge(n,t,null),b(t,l),ge(a,t,null),b(t,s),ge(o,t,null),b(t,i),ge(c,t,null),u=!0,d||(m=O(t,"contextmenu",e[4]),d=!0)},p(e,[a]){if(2&a&&f!==(f=e[2][e[1]])){if(n){se();const e=n;ie(e.$$.fragment,1,0,(()=>{ye(e,1)})),oe()}f?(n=H(f,{}),ve(n.$$.fragment),re(n.$$.fragment,1),ge(n,t,l)):n=null}const s={};!r&&1&a&&(r=!0,s.menu=e[0],J((()=>r=!1))),o.$set(s)},i(e){u||(n&&re(n.$$.fragment,e),re(a.$$.fragment,e),re(o.$$.fragment,e),re(c.$$.fragment,e),u=!0)},o(e){n&&ie(n.$$.fragment,e),ie(a.$$.fragment,e),ie(o.$$.fragment,e),ie(c.$$.fragment,e),u=!1},d(e){e&&k(t),n&&ye(n),ye(a),ye(o),ye(c),d=!1,m()}}}function Ll(e,t,n){let l,a;u(e,Ae,(e=>n(5,l=e))),u(e,Me,(e=>n(1,a=e)));const s={Index:jt,Foreword:Xt,Explore:Qt,Battle:sl,Afflatus:Bl};window.deepCopy=e=>{if(Array.isArray(e)){let a=e;for(var t=[],n=0;n<a.length;n++)if(Array.isArray(a[n])){var l=deepCopy(a[n]);t.push(l)}else t.push(a[n]);return t}{let t=e.constructor===Array?[]:{};for(let n in e)t[n]="object"==typeof e[n]?deepCopy(e[n]):e[n];return t}},Array.prototype.rd=function(){for(var e,t,n=this.length;n;e=parseInt(Math.random()*n),t=this[--n],this[n]=this[e],this[e]=t);return this},String.prototype.getByteLen=function(){let e=0;for(let t=0;t<this.length;t++)this.charCodeAt(t)<256?e+=1:e+=2;return e},window.r=Math.random;let o;window.RAF=class{constructor(){this.init()}init(){this._timerIdMap={timeout:{},interval:{}}}run(e="interval",t,n=16.7){const l=Date.now;let a=l(),s=a;const o=Symbol(),r=()=>{this.setIdMap(o,e,r),s=l(),s-a>=n&&("interval"===e&&(a=l(),s=a),t(),"timeout"===e&&this.clearTimeout(o))};return this.setIdMap(o,e,r),o}setIdMap(e,t,n){const l=requestAnimationFrame(n);this._timerIdMap[t][e]=l}setTimeout(e,t){return this.run("timeout",e,t)}clearTimeout(e){cancelAnimationFrame(this._timerIdMap.timeout[e])}setInterval(e,t){return this.run("interval",e,t)}clearInterval(e){cancelAnimationFrame(this._timerIdMap.interval[e])}},Ae.set({list:{},add(e,t,n){this.list[e]={handle:t,time:n,left:n,pause:!1}},clear(e){e?delete this.list[e]:this.list={}},pause(e){}}),setInterval((e=>{let t=l.list;for(let e in t)1==t[e].left?(t[e].left=t[e].time,t[e].handle()):t[e].left--}),16);return[o,a,s,function(e){o=e,n(0,o)},e=>o(e)]}return new class extends xe{constructor(e){super(),_e(this,e,Ll,Fl,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
